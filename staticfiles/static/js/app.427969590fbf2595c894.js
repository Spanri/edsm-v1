webpackJsonp([1],{"1oKC":function(t,e){},"1pgQ":function(t,e){},"2p8z":function(t,e){},"3NFs":function(t,e){},"9qY2":function(t,e){},A7fx:function(t,e){},"C+Jl":function(t,e){},Ecp2:function(t,e){},FhJ5:function(t,e){},LHS3:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("7+uW"),s=i("//Fk"),r=i.n(s),o="https://edms-mtuci.herokuapp.com",a={name:"main",data:function(){return{email:null,password:null,passwordFieldType:"password",emailForConfirm:null,processConfirm:!1,code:null,password1:null,password2:null,error:null,loginStyle1:"underline",loginStyle2:"none",boxSize:"420px",newPassword:0}},computed:{},methods:{switchVisibility:function(){this.passwordFieldType="password"===this.passwordFieldType?"text":"password"},doLogin:function(t){var e=this,i=this.email,n=this.password;this.$store.dispatch("AUTH_REQUEST",{email:i,password:n}).then(function(){e.error=null,e.$router.push("/")}).catch(function(t){'{"non_field_errors":["Unable to log in with provided credentials."]}'==t||'{"email":["Enter a valid email address."]}'==t?e.error="Неверный логин или пароль.":(t.length>200?e.error=t.substring(0,200)+"...":e.error=t,console.log(t))}),this.$router.push("/")},rememberPassword:function(){var t=this,e=this.emailForConfirm;this.processConfirm=!0,this.$store.dispatch("USER_CONFIRM_UPDATE_PASSWORD",e).then(function(e){t.error=null,t.processConfirm=!1,t.newPassword=2}).catch(function(e){t.processConfirm=!1,e.length>200?"NameError at /rest_auth/password/reset/"==e.substring(0,39)?t.error="Такой email не зарегестрирован в системе.":t.error=e.substring(0,200)+"...":t.error=e})},updatePassword:function(){var t=this,e=this.code,i=this.password1,n=this.password2;i==n?(this.error="Круто клево",this.processConfirm=!0,this.$store.dispatch("USER_CHANGE_PASSWORD",{uid:e.split("/")[0],token:e.split("/")[1],password1:i,password2:n}).then(function(e){t.error=null,t.processConfirm=!1,t.newPassword=0}).catch(function(e){console.log(e),'{"uid":["Invalid value"]}'==e||'{"token":["Invalid value"]}'==e?t.err="Неверный код.":'{"new_password2":["This password is too short. It must contain at least 8 characters.","This password is too common.","This password is entirely numeric."]}'==e?t.err="Слишком короткий пароль.":e.length>200?t.error=e.substring(0,200)+"...":t.error=e})):this.error="Пароли не совпадают."}}},c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mainAuth"},[i("div"),t._v(" "),i("div",{staticClass:"login"},[i("div"),t._v(" "),i("div",[0==t.newPassword?i("div",{staticClass:"auth",style:{height:t.boxSize}},[t._m(0),t._v(" "),i("div",[i("p",[t._v("EMAIL")]),t._v(" "),i("input",{directives:[{name:"validate",rawName:"v-validate.immediate",value:"required_if:!newPassword",expression:"'required_if:!newPassword'",modifiers:{immediate:!0}},{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"search-box",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"Введите логин"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),t._v(" "),i("div",{staticStyle:{height:"15px"}}),t._v(" "),i("p",[t._v("ПАРОЛЬ")]),t._v(" "),"checkbox"===t.passwordFieldType?i("input",{directives:[{name:"validate",rawName:"v-validate.immediate",value:"required_if:!newPassword",expression:"'required_if:!newPassword'",modifiers:{immediate:!0}},{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"search-box",staticStyle:{width:"166px"},attrs:{placeholder:"Введите пароль",type:"checkbox"},domProps:{checked:Array.isArray(t.password)?t._i(t.password,null)>-1:t.password},on:{change:function(e){var i=t.password,n=e.target,s=!!n.checked;if(Array.isArray(i)){var r=t._i(i,null);n.checked?r<0&&(t.password=i.concat([null])):r>-1&&(t.password=i.slice(0,r).concat(i.slice(r+1)))}else t.password=s}}}):"radio"===t.passwordFieldType?i("input",{directives:[{name:"validate",rawName:"v-validate.immediate",value:"required_if:!newPassword",expression:"'required_if:!newPassword'",modifiers:{immediate:!0}},{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"search-box",staticStyle:{width:"166px"},attrs:{placeholder:"Введите пароль",type:"radio"},domProps:{checked:t._q(t.password,null)},on:{change:function(e){t.password=null}}}):i("input",{directives:[{name:"validate",rawName:"v-validate.immediate",value:"required_if:!newPassword",expression:"'required_if:!newPassword'",modifiers:{immediate:!0}},{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"search-box",staticStyle:{width:"166px"},attrs:{placeholder:"Введите пароль",type:t.passwordFieldType},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._v(" "),i("button",{staticStyle:{padding:"6px",margin:"0"},attrs:{type:"password"},on:{click:function(e){return t.switchVisibility()}}},[i("svg",{attrs:{width:"16px",stroke:"white","enable-background":"new 0 0 10 12",id:"Editable-line",viewBox:"0 0 30 30"}},[i("path",{attrs:{d:"  M16,7C9.934,7,4.798,10.776,3,16c1.798,5.224,6.934,9,13,9s11.202-3.776,13-9C27.202,10.776,22.066,7,16,7z",fill:"none",id:"XMLID_13_","stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":"10","stroke-width":"2"}}),t._v(" "),i("circle",{attrs:{cx:"16",cy:"16",fill:"none",id:"XMLID_14_",r:"5","stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":"10","stroke-width":"2"}}),t._v(" "),"text"==t.passwordFieldType?i("line",{attrs:{fill:"none",id:"XMLID_15_","stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":"10","stroke-width":"2",x1:"3",x2:"29",y1:"3",y2:"29"}}):t._e()])]),t._v(" "),i("div",{staticStyle:{height:"35px"}}),t._v(" "),i("button",{attrs:{type:"submit"},on:{click:function(e){return t.doLogin()}}},[t._v("ВОЙТИ")]),t._v(" "),i("br"),t._v(" "),i("div",{staticClass:"rememberPassword",on:{click:function(e){t.newPassword=1}}},[t._v("\n\t\t\t\t\t\tЗабыли пароль?\n\t\t\t\t\t")])])]):t._e(),t._v(" "),1==t.newPassword?i("div",{staticClass:"auth",style:{height:"360px"}},[t._m(1),t._v(" "),i("p",{staticStyle:{"text-align":"center",padding:"10px","padding-top":"0"}},[t._v(" \n\t\t\t\t\tЭто страница смены пароля. Чтобы подтвердить свою почту, впишите ее в поле.\n\t\t\t\t\tВам придет код на почту, который следует ввести на следующем шаге.\n\t\t\t\t")]),t._v(" "),i("p",[t._v("EMAIL")]),t._v(" "),i("input",{directives:[{name:"validate",rawName:"v-validate.immediate",value:"required_if:!newPassword",expression:"'required_if:!newPassword'",modifiers:{immediate:!0}},{name:"model",rawName:"v-model",value:t.emailForConfirm,expression:"emailForConfirm"}],staticClass:"search-box",attrs:{type:"email",placeholder:"Введите email"},domProps:{value:t.emailForConfirm},on:{input:function(e){e.target.composing||(t.emailForConfirm=e.target.value)}}}),t._v(" "),i("div",{staticStyle:{height:"25px"}}),t._v(" "),t.processConfirm?t._e():i("div",[i("button",{attrs:{type:"submit"},on:{click:function(e){t.newPassword=0,t.error=""}}},[t._v("ВЕРНУТЬСЯ")]),t._v(" "),i("button",{attrs:{type:"submit"},on:{click:function(e){return t.rememberPassword()}}},[t._v("ОТПРАВИТЬ")])]),t._v(" "),t.processConfirm?i("div",[i("p",[t._v("Отправляется...")])]):t._e()]):t._e(),t._v(" "),2==t.newPassword?i("div",{staticClass:"auth",style:{height:"500px"}},[t._m(2),t._v(" "),i("p",{staticStyle:{"text-align":"center",padding:"10px","padding-top":"0"}},[t._v(" \n\t\t\t\t\tВведите код подтверждения и новый пароль, а также подтвердите его.\n\t\t\t\t")]),t._v(" "),i("p",[t._v("КОД ПОДТВЕРЖДЕНИЯ")]),t._v(" "),i("input",{directives:[{name:"validate",rawName:"v-validate.immediate",value:"required_if:!newPassword",expression:"'required_if:!newPassword'",modifiers:{immediate:!0}},{name:"model",rawName:"v-model",value:t.code,expression:"code"}],staticClass:"search-box",attrs:{type:"email",placeholder:"Введите email"},domProps:{value:t.code},on:{input:function(e){e.target.composing||(t.code=e.target.value)}}}),t._v(" "),i("p",[t._v("НОВЫЙ ПАРОЛЬ")]),t._v(" "),i("input",{directives:[{name:"validate",rawName:"v-validate.immediate",value:"required_if:!newPassword",expression:"'required_if:!newPassword'",modifiers:{immediate:!0}},{name:"model",rawName:"v-model",value:t.password1,expression:"password1"}],staticClass:"search-box",attrs:{type:"password",placeholder:"Введите пароль"},domProps:{value:t.password1},on:{input:function(e){e.target.composing||(t.password1=e.target.value)}}}),t._v(" "),i("p",[t._v("ПОДТВЕРЖДЕНИЕ ПАРОЛЯ")]),t._v(" "),i("input",{directives:[{name:"validate",rawName:"v-validate.immediate",value:"required_if:!newPassword",expression:"'required_if:!newPassword'",modifiers:{immediate:!0}},{name:"model",rawName:"v-model",value:t.password2,expression:"password2"}],staticClass:"search-box",attrs:{type:"password",placeholder:"Подтвердите пароль"},domProps:{value:t.password2},on:{input:function(e){e.target.composing||(t.password2=e.target.value)}}}),t._v(" "),i("div",{staticStyle:{height:"25px"}}),t._v(" "),i("button",{attrs:{type:"submit"},on:{click:function(e){t.newPassword=0,t.error=""}}},[t._v("ВЕРНУТЬСЯ")]),t._v(" "),i("button",{attrs:{type:"submit"},on:{click:function(e){return t.updatePassword()}}},[t._v("ПОДТВЕРДИТЬ")])]):t._e()]),t._v(" "),t.error?i("p",{staticStyle:{color:"red","max-width":"400px"}},[t._v(" "+t._s(t.error)+" ")]):t._e()]),t._v(" "),i("div")])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"switch"},[e("div"),this._v(" "),e("p",{staticStyle:{textDecoration:"underline"}},[this._v("ВХОД")]),this._v(" "),e("div")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"switch"},[e("div"),this._v(" "),e("p",{staticStyle:{textDecoration:"underline"}},[this._v("СМЕНА ПАРОЛЯ - ШАГ 1")]),this._v(" "),e("div")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"switch"},[e("div"),this._v(" "),e("p",{staticStyle:{textDecoration:"underline"}},[this._v("СМЕНА ПАРОЛЯ - ШАГ 2")]),this._v(" "),e("div")])}]};var l=i("VU/8")(a,c,!1,function(t){i("Ecp2")},"data-v-7bd276e6",null).exports,d=i("Dd8w"),u=i.n(d),p=i("NYxO"),f={name:"Header",components:{},data:function(){return{search:"",n:"",notifHover:!1}},created:function(){},computed:u()({},Object(p.b)({getProfile:"getProfile",getDocsOld:"getDocsOld"}),{title:function(){return"Открыть профиль\n"+this.getProfile.email},notif:function(){return this.getDocsOld.filter(function(t){return 3==t.status||2==t.status}).length},notifColor:function(){return this.notifHover?"#aaa9f8":this.notif>0?"#ff7391":"#FFFFFF"},notifIcon:function(){return this.notif>0?"https://img.icons8.com/material/30/ff7373/bell.png":"https://img.icons8.com/material/30/FFFFFF/bell.png"}}),methods:{toMain:function(){this.$router.push("/")},toNotif:function(){this.$router.push("/profile/notif")},toAddDoc:function(){this.$router.push("/addDoc")},toProfile:function(){this.$router.push("/profile/notif")}}},h={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"background"},[i("div",{staticClass:"header"},[i("div",{staticClass:"logo",attrs:{title:"На главную"},on:{click:function(e){return t.toMain()}}},[i("svg",{attrs:{height:"23pt",viewBox:"0 0 80 80"}},[i("g",[i("path",{staticStyle:{stroke:"none","fill-rule":"nonzero","fill-opacity":"1"},attrs:{d:"M 45.625 37.9375 C 45.863281 38.402344 46.332031 38.667969 46.816406 38.667969 C 47.019531 38.667969 47.226562 38.621094 47.421875 38.523438 C 47.5 38.480469 55.347656 34.496094 59.21875 33.273438 C 59.921875 33.050781 60.308594 32.300781 60.085938 31.597656 C 59.867188 30.898438 59.121094 30.507812 58.414062 30.730469 C 54.335938 32.019531 46.542969 35.976562 46.210938 36.144531 C 45.554688 36.480469 45.292969 37.28125 45.625 37.9375 Z M 45.625 37.9375 "}}),t._v(" "),i("path",{staticStyle:{stroke:"none","fill-rule":"nonzero","fill-opacity":"1"},attrs:{d:"M 46.816406 22.667969 C 47.019531 22.667969 47.226562 22.621094 47.421875 22.523438 C 47.5 22.480469 55.347656 18.496094 59.21875 17.273438 C 59.921875 17.050781 60.308594 16.300781 60.085938 15.597656 C 59.867188 14.898438 59.121094 14.507812 58.414062 14.730469 C 54.335938 16.019531 46.542969 19.976562 46.210938 20.144531 C 45.554688 20.480469 45.292969 21.28125 45.625 21.9375 C 45.863281 22.402344 46.332031 22.667969 46.816406 22.667969 Z M 46.816406 22.667969 "}}),t._v(" "),i("path",{staticStyle:{stroke:"none","fill-rule":"nonzero","fill-opacity":"1"},attrs:{d:"M 78.816406 20 C 78.078125 20 77.484375 20.597656 77.484375 21.332031 L 77.484375 73.332031 C 77.484375 75.539062 75.6875 77.332031 73.484375 77.332031 L 41.484375 77.332031 L 41.484375 74.265625 C 43.425781 73.585938 48.492188 72 53.484375 72 C 65.097656 72 72.984375 74.574219 73.0625 74.597656 C 73.464844 74.734375 73.914062 74.664062 74.261719 74.414062 C 74.609375 74.164062 74.816406 73.761719 74.816406 73.332031 L 74.816406 14.667969 C 74.816406 14.042969 74.382812 13.5 73.773438 13.367188 C 73.773438 13.367188 72.726562 13.132812 70.941406 12.804688 C 70.21875 12.671875 69.519531 13.152344 69.386719 13.875 C 69.253906 14.597656 69.734375 15.292969 70.457031 15.425781 C 71.140625 15.550781 71.710938 15.664062 72.148438 15.75 L 72.148438 71.5625 C 69.128906 70.769531 62.417969 69.332031 53.484375 69.332031 C 47.671875 69.332031 41.964844 71.242188 40.203125 71.886719 C 38.632812 71.195312 33.886719 69.332031 28.148438 69.332031 C 18.964844 69.332031 11.398438 70.847656 8.148438 71.617188 L 8.148438 15.699219 C 10.8125 15.042969 18.675781 13.332031 28.148438 13.332031 C 33.011719 13.332031 37.179688 14.847656 38.816406 15.53125 L 38.816406 68 C 38.816406 68.480469 39.074219 68.925781 39.492188 69.160156 C 39.910156 69.398438 40.425781 69.390625 40.835938 69.144531 C 40.96875 69.066406 54.179688 61.175781 65.902344 57.265625 C 66.449219 57.082031 66.816406 56.574219 66.816406 56 L 66.816406 1.332031 C 66.816406 0.898438 66.601562 0.488281 66.242188 0.238281 C 65.882812 -0.0117188 65.425781 -0.0703125 65.011719 0.0859375 C 54.34375 4.085938 43.550781 10.804688 43.441406 10.871094 C 42.820312 11.261719 42.628906 12.082031 43.019531 12.707031 C 43.40625 13.332031 44.230469 13.523438 44.855469 13.132812 C 44.953125 13.070312 54.34375 7.226562 64.148438 3.285156 L 64.148438 55.046875 C 55.046875 58.207031 45.546875 63.371094 41.484375 65.683594 L 41.484375 14.667969 C 41.484375 14.160156 41.195312 13.699219 40.746094 13.472656 C 40.515625 13.359375 35.050781 10.667969 28.148438 10.667969 C 16.101562 10.667969 6.839844 13.273438 6.449219 13.386719 C 5.878906 13.546875 5.484375 14.074219 5.484375 14.667969 L 5.484375 73.335938 C 5.484375 73.75 5.679688 74.144531 6.011719 74.398438 C 6.246094 74.574219 6.527344 74.667969 6.816406 74.667969 C 6.9375 74.667969 7.0625 74.648438 7.179688 74.617188 C 7.273438 74.589844 16.492188 72 28.148438 72 C 33.023438 72 37.1875 73.519531 38.816406 74.199219 L 38.816406 77.335938 L 6.816406 77.335938 C 4.609375 77.335938 2.816406 75.539062 2.816406 73.335938 L 2.816406 21.335938 C 2.816406 20.597656 2.21875 20 1.484375 20 C 0.746094 20 0.148438 20.597656 0.148438 21.335938 L 0.148438 73.335938 C 0.148438 77.011719 3.140625 80 6.816406 80 L 73.484375 80 C 77.160156 80 80.148438 77.011719 80.148438 73.335938 L 80.148438 21.335938 C 80.148438 20.597656 79.554688 20 78.816406 20 Z M 78.816406 20 "}}),t._v(" "),i("path",{staticStyle:{stroke:"none","fill-rule":"nonzero","fill-opacity":"1"},attrs:{d:"M 45.625 29.9375 C 45.863281 30.402344 46.332031 30.667969 46.816406 30.667969 C 47.019531 30.667969 47.226562 30.621094 47.421875 30.523438 C 47.5 30.480469 55.347656 26.496094 59.21875 25.273438 C 59.921875 25.050781 60.308594 24.300781 60.085938 23.597656 C 59.867188 22.898438 59.121094 22.507812 58.414062 22.730469 C 54.335938 24.019531 46.542969 27.976562 46.210938 28.144531 C 45.554688 28.480469 45.292969 29.28125 45.625 29.9375 Z M 45.625 29.9375 "}}),t._v(" "),i("path",{staticStyle:{stroke:"none","fill-rule":"nonzero","fill-opacity":"1"},attrs:{d:"M 45.625 45.9375 C 45.863281 46.402344 46.332031 46.667969 46.816406 46.667969 C 47.019531 46.667969 47.226562 46.621094 47.421875 46.523438 C 47.5 46.480469 55.347656 42.496094 59.21875 41.273438 C 59.921875 41.050781 60.308594 40.300781 60.085938 39.597656 C 59.867188 38.898438 59.121094 38.507812 58.414062 38.730469 C 54.335938 40.019531 46.542969 43.976562 46.210938 44.144531 C 45.554688 44.480469 45.292969 45.28125 45.625 45.9375 Z M 45.625 45.9375 "}}),t._v(" "),i("path",{staticStyle:{stroke:"none","fill-rule":"nonzero","fill-opacity":"1"},attrs:{d:"M 32.453125 24.746094 C 24.21875 22.8125 14.863281 25.273438 14.472656 25.378906 C 13.761719 25.570312 13.335938 26.300781 13.527344 27.011719 C 13.6875 27.609375 14.226562 28 14.816406 28 C 14.929688 28 15.046875 27.984375 15.160156 27.957031 C 15.25 27.929688 24.257812 25.5625 31.84375 27.339844 C 32.558594 27.507812 33.28125 27.0625 33.449219 26.347656 C 33.617188 25.628906 33.171875 24.914062 32.453125 24.746094 Z M 32.453125 24.746094 "}}),t._v(" "),i("path",{staticStyle:{stroke:"none","fill-rule":"nonzero","fill-opacity":"1"},attrs:{d:"M 32.453125 32.746094 C 24.21875 30.8125 14.863281 33.273438 14.472656 33.378906 C 13.761719 33.570312 13.335938 34.300781 13.527344 35.011719 C 13.6875 35.609375 14.226562 36 14.816406 36 C 14.929688 36 15.046875 35.984375 15.160156 35.957031 C 15.25 35.929688 24.257812 33.5625 31.84375 35.339844 C 32.558594 35.507812 33.28125 35.0625 33.449219 34.347656 C 33.617188 33.628906 33.171875 32.914062 32.453125 32.746094 Z M 32.453125 32.746094 "}}),t._v(" "),i("path",{staticStyle:{stroke:"none","fill-rule":"nonzero","fill-opacity":"1"},attrs:{d:"M 45.625 53.9375 C 45.863281 54.402344 46.332031 54.667969 46.816406 54.667969 C 47.019531 54.667969 47.226562 54.621094 47.421875 54.523438 C 47.5 54.480469 55.347656 50.496094 59.21875 49.273438 C 59.921875 49.050781 60.308594 48.300781 60.085938 47.597656 C 59.867188 46.898438 59.121094 46.507812 58.414062 46.730469 C 54.335938 48.019531 46.542969 51.976562 46.210938 52.144531 C 45.554688 52.480469 45.292969 53.28125 45.625 53.9375 Z M 45.625 53.9375 "}}),t._v(" "),i("path",{staticStyle:{stroke:"none","fill-rule":"nonzero","fill-opacity":"1"},attrs:{d:"M 32.453125 40.746094 C 24.21875 38.8125 14.863281 41.273438 14.472656 41.378906 C 13.761719 41.570312 13.335938 42.300781 13.527344 43.011719 C 13.6875 43.609375 14.226562 44.003906 14.816406 44.003906 C 14.929688 44.003906 15.046875 43.984375 15.160156 43.957031 C 15.25 43.929688 24.257812 41.5625 31.84375 43.339844 C 32.558594 43.507812 33.28125 43.0625 33.449219 42.347656 C 33.617188 41.628906 33.171875 40.914062 32.453125 40.746094 Z M 32.453125 40.746094 "}}),t._v(" "),i("path",{staticStyle:{stroke:"none","fill-rule":"nonzero","fill-opacity":"1"},attrs:{d:"M 32.453125 56.746094 C 24.21875 54.8125 14.863281 57.273438 14.472656 57.378906 C 13.761719 57.570312 13.335938 58.300781 13.527344 59.011719 C 13.6875 59.609375 14.226562 60.003906 14.816406 60.003906 C 14.929688 60.003906 15.046875 59.984375 15.160156 59.957031 C 15.25 59.929688 24.257812 57.5625 31.84375 59.339844 C 32.558594 59.507812 33.28125 59.0625 33.449219 58.347656 C 33.617188 57.628906 33.171875 56.914062 32.453125 56.746094 Z M 32.453125 56.746094 "}}),t._v(" "),i("path",{staticStyle:{stroke:"none","fill-rule":"nonzero","fill-opacity":"1"},attrs:{d:"M 32.453125 48.746094 C 24.21875 46.8125 14.863281 49.273438 14.472656 49.378906 C 13.761719 49.570312 13.335938 50.300781 13.527344 51.011719 C 13.6875 51.609375 14.226562 52.003906 14.816406 52.003906 C 14.929688 52.003906 15.046875 51.984375 15.160156 51.957031 C 15.25 51.929688 24.257812 49.5625 31.84375 51.339844 C 32.558594 51.507812 33.28125 51.0625 33.449219 50.347656 C 33.617188 49.628906 33.171875 48.914062 32.453125 48.746094 Z M 32.453125 48.746094 "}})])]),t._v(" "),i("p",[t._v("СЭД МТУСИ")])]),t._v(" "),i("div"),t._v(" "),i("div",{staticClass:"header-right"},[i("div",{staticClass:"icon",attrs:{title:"Добавить документ"},on:{click:t.toAddDoc}},[i("div",[t._v("+")]),t._v(" "),i("svg",{attrs:{fill:"white",width:"30px",height:"30px",viewBox:"0 0 32 32"}},[i("g",{attrs:{"fill-rule":"evenodd",stroke:"none","stroke-width":"1"}},[i("g",[i("path",{attrs:{d:"M19.5,3 L9.00276013,3 C7.89666625,3 7,3.89833832 7,5.00732994 L7,27.9926701 C7,29.1012878 7.89092539,30 8.99742191,30 L24.0025781,30 C25.1057238,30 26,29.1017876 26,28.0092049 L26,10.5 L26,10 L20,3 L19.5,3 L19.5,3 L19.5,3 Z M19,4 L8.9955775,4 C8.44573523,4 8,4.45526288 8,4.99545703 L8,28.004543 C8,28.5543187 8.45470893,29 8.9999602,29 L24.0000398,29 C24.5523026,29 25,28.5550537 25,28.0066023 L25,11 L20.9979131,11 C19.8944962,11 19,10.1134452 19,8.99408095 L19,4 L19,4 Z M20,4.5 L20,8.99121523 C20,9.54835167 20.4506511,10 20.9967388,10 L24.6999512,10 L20,4.5 L20,4.5 Z M15,14 L15,15 L23,15 L23,14 L15,14 L15,14 Z M10,13 L10,16 L13,16 L13,13 L10,13 L10,13 Z M11,14 L11,15 L12,15 L12,14 L11,14 L11,14 Z M10,18 L10,21 L13,21 L13,18 L10,18 L10,18 Z M11,19 L11,20 L12,20 L12,19 L11,19 L11,19 Z M15,19 L15,20 L23,20 L23,19 L15,19 L15,19 Z M10,23 L10,26 L13,26 L13,23 L10,23 L10,23 Z M11,24 L11,25 L12,25 L12,24 L11,24 L11,24 Z M15,24 L15,25 L23,25 L23,24 L15,24 L15,24 Z"}})])])])]),t._v(" "),i("div",{staticClass:"icon",attrs:{title:"Уведомления"},on:{mouseenter:function(e){t.notifHover=!0},mouseleave:function(e){t.notifHover=!1},click:t.toNotif}},[i("div",{style:{color:t.notifColor}},[t._v(t._s(t.notif))]),t._v(" "),i("svg",{style:{fill:t.notifColor},attrs:{width:"30px",height:"30px",viewBox:"25 0 15 78"}},[i("g",{attrs:{id:"Layer_2"}},[i("g",{attrs:{id:"Layer_3"}},[i("path",{attrs:{d:"M54.2,54.4l-5.1-6.3c-0.5-0.7-0.8-1.5-0.8-2.4v-13c0-8.1-5.4-15.3-13.2-17.5v-5.1c0-2.8-2.3-5-5-5s-5,2.3-5,5v5    c-7.9,2.3-13.3,9.5-13.2,17.6v13c0,0.9-0.3,1.7-0.8,2.4l-5.1,6.3c-0.4,0.5-0.7,1.2-0.7,1.9v7.9h49.8v-7.9    C54.9,55.6,54.6,54.9,54.2,54.4z M28,10.1c0-1.1,0.9-2,2-2s2,0.9,2,2v4.5c-1.4-0.2-2.7-0.2-4.1,0V10.1z M51.9,61.1H8.1v-4.8    l5.1-6.3c1-1.2,1.5-2.7,1.5-4.3v-13c0-8.4,6.8-15.3,15.3-15.3s15.3,6.8,15.3,15.3v13c0,1.6,0.5,3.1,1.5,4.3l5.1,6.3V61.1z"}}),t._v(" "),i("path",{attrs:{d:"M28,20.8v3c6.1,0,11.1,5,11.1,11.1c0,0,0,0,0,0h3C42.1,27.1,35.8,20.8,28,20.8C28,20.8,28,20.8,28,20.8z"}}),t._v(" "),i("path",{attrs:{d:"M30,69.9c-2.9,0-5.2-2.3-5.2-5.2h-3c0,4.5,3.7,8.2,8.2,8.2c4.5,0,8.2-3.7,8.2-8.2h-3C35.2,67.6,32.9,69.9,30,69.9z"}})])])])]),t._v(" "),i("img",{staticClass:"profile",attrs:{title:t.title,src:t.getProfile.profile.photo},on:{click:function(e){return t.toProfile()}}})])])])},staticRenderFns:[]};var v=i("VU/8")(f,h,!1,function(t){i("l7vA")},"data-v-d26f8cd4",null).exports,m={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"background"},[i("div",{staticClass:"footer"},[i("p",[t._v("МТУСИ, 2019 | "),i("label",{on:{click:function(e){return t.toHelp()}}},[t._v("Помощь")])])])])},staticRenderFns:[]};var _=i("VU/8")({name:"Header",data:function(){return{}},methods:{toHelp:function(){this.$router.push("/help")}}},m,!1,function(t){i("NeqC")},"data-v-9221089c",null).exports,C=i("mtWM"),g=i.n(C),w={name:"App",components:{Header:v,Footer:_,Auth:l},data:function(){return{closeButtonSize:"300px auto",menuSize:"300px auto",marginLeft:20,close:!1,textClose:"X СВЕРНУТЬ МЕНЮ"}},created:function(){g.a.interceptors.response.use(void 0,function(t){return new r.a(function(e,i){throw 401===t.status&&t.config&&!t.config.__isRetryRequest&&this.$store.dispatch(AUTH_LOGOUT),t})})},computed:{closeM:function(){return this.close?(this.menuSize="100%",this.closeButtonSize="0 100%",this.marginLeft=50,this.textClose="!!!",!0):(this.menuSize="300px auto",this.closeButtonSize=this.menuSize,this.marginLeft=20,this.textClose="X СВЕРНУТЬ МЕНЮ",!1)}},methods:{closeMenu:function(){this.close=!this.close}}},y={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[this.$store.getters.isAuthenticated?e("div",{staticClass:"a"},[e("Header"),this._v(" "),e("router-view"),this._v(" "),e("Footer")],1):e("div",[e("Auth")],1)])},staticRenderFns:[]};var x=i("VU/8")(w,y,!1,function(t){i("hh+E")},null,null).exports,b=i("/ocq"),S={name:"Menu",data:function(){return{fileCabinets:[],fileCabinet:"",closeMenu:!1}},created:function(){this.$store.dispatch("DOCS_FILTER");var t=this.$store.getters.getDocsOld;this.fileCabinets=this.$store.getters.getFileCabinets;this.fileCabinets=this.fileCabinets.filter(function(e){return 0!=t.filter(function(t){return t.doc.fileCabinet.id==e.id}).length}),this.fileCabinet=this.$store.getters.getFileCabinet,this.fileCabinet in this.fileCabinets==!1&&(this.fileCabinet=this.fileCabinets[0])},methods:{onChange:function(){this.$store.commit("DOCS_FILE_CABINET",this.fileCabinet),this.$store.dispatch("DOCS_FILTER")}}},k={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"menu"},[t.closeMenu?i("div",{staticClass:"openCloseMenuButton",staticStyle:{height:"100%"},attrs:{title:"Раскрыть"},on:{click:function(e){t.closeMenu=!1}}},[i("svg",{attrs:{fill:"#347090","enable-background":"new 0 0 96 96",height:"26px",viewBox:"0 0 96 96",width:"26px","xml:space":"preserve",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[i("path",{attrs:{d:"M12,52h62.344L52.888,73.456c-1.562,1.562-1.562,4.095-0.001,5.656c1.562,1.562,4.096,1.562,5.658,0l28.283-28.284l0,0  c0.186-0.186,0.352-0.391,0.498-0.609c0.067-0.101,0.114-0.21,0.172-0.315c0.066-0.124,0.142-0.242,0.195-0.373  c0.057-0.135,0.089-0.275,0.129-0.415c0.033-0.111,0.076-0.217,0.099-0.331C87.973,48.525,88,48.263,88,48l0,0  c0-0.003-0.001-0.006-0.001-0.009c-0.001-0.259-0.027-0.519-0.078-0.774c-0.024-0.12-0.069-0.231-0.104-0.349  c-0.039-0.133-0.069-0.268-0.123-0.397c-0.058-0.139-0.136-0.265-0.208-0.396c-0.054-0.098-0.097-0.198-0.159-0.292  c-0.146-0.221-0.314-0.427-0.501-0.614L58.544,16.888c-1.562-1.562-4.095-1.562-5.657-0.001c-1.562,1.562-1.562,4.095,0,5.658  L74.343,44L12,44c-2.209,0-4,1.791-4,4C8,50.209,9.791,52,12,52z"}})])]):t._e(),t._v(" "),t.closeMenu?t._e():i("div",{staticClass:"menuOpen"},[i("div",{staticStyle:{display:"grid","grid-template-columns":"1fr auto"},attrs:{title:"Скрыть"}},[i("div"),t._v(" "),i("svg",{staticClass:"openCloseMenuButton",staticStyle:{"margin-bottom":"0px","margin-top":"15px","margin-right":"15px"},attrs:{height:"21px",viewBox:"0 0 31 32",width:"22px","xml:space":"preserve",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},on:{click:function(e){t.closeMenu=!0}}},[i("g",{attrs:{id:"Cancel",stroke:"#347090","stroke-width":"1"}},[i("path",{attrs:{"clip-rule":"evenodd",d:"M16,0C7.163,0,0,7.163,0,16c0,8.836,7.163,16,16,16   c8.836,0,16-7.163,16-16C32,7.163,24.836,0,16,0z M16,30C8.268,30,2,23.732,2,16C2,8.268,8.268,2,16,2s14,6.268,14,14   C30,23.732,23.732,30,16,30z",fill:"#121313","fill-rule":"evenodd"}}),t._v(" "),i("path",{attrs:{"clip-rule":"evenodd",d:"M22.729,21.271l-5.268-5.269l5.238-5.195   c0.395-0.391,0.395-1.024,0-1.414c-0.394-0.39-1.034-0.39-1.428,0l-5.231,5.188l-5.309-5.31c-0.394-0.396-1.034-0.396-1.428,0   c-0.394,0.395-0.394,1.037,0,1.432l5.301,5.302l-5.331,5.287c-0.394,0.391-0.394,1.024,0,1.414c0.394,0.391,1.034,0.391,1.429,0   l5.324-5.28l5.276,5.276c0.394,0.396,1.034,0.396,1.428,0C23.123,22.308,23.123,21.667,22.729,21.271z",fill:"#121313","fill-rule":"evenodd"}})])])]),t._v(" "),i("p",{staticStyle:{"margin-top":"10px"}},[t._v("Картотека")]),t._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:t.fileCabinet,expression:"fileCabinet"}],on:{change:[function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.fileCabinet=e.target.multiple?i:i[0]},function(e){return t.onChange()}]}},t._l(t.fileCabinets,function(e){return i("option",{key:e.id,domProps:{value:e}},[t._v(t._s(e.name))])}),0),t._v(" "),i("router-link",{staticClass:"router-link",attrs:{to:{path:"/documents/all"}}},[t._v("ВСЕ ДОКУМЕНТЫ")]),t._v(" "),i("router-link",{staticClass:"router-link",attrs:{to:{path:"/documents/common"}}},[t._v("ОБЩИЙ ДОСТУП")]),t._v(" "),i("router-link",{staticClass:"router-link",attrs:{to:{path:"/documents/myDocs"}}},[t._v("МОИ ДОКУМЕНТЫ")]),t._v(" "),i("router-link",{staticClass:"router-link",attrs:{to:{path:"/documents/signature-request"}}},[t._v("НА ПОДПИСЬ")]),t._v(" "),i("router-link",{staticClass:"router-link",attrs:{to:{path:"/documents/signature-success"}}},[t._v("ПОДПИСАННОЕ")]),t._v(" "),i("router-link",{staticClass:"router-link",attrs:{to:{path:"/documents/available-to-me"}}},[t._v("ДОСТУПНЫ МНЕ")])],1)])},staticRenderFns:[]};var E={name:"auth",components:{Menu:i("VU/8")(S,k,!1,function(t){i("C+Jl")},"data-v-027bd642",null).exports},created:function(){}},D={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"maing"},[e("Menu"),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var L=i("VU/8")(E,D,!1,function(t){i("1oKC")},null,null).exports,U={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"headerProfileGradient"},[i("div",{staticClass:"headerProfile"},[i("img",{staticClass:"avatar",attrs:{src:t.profile.photo}}),t._v(" "),t.profile.first_name?i("div",[i("p",{staticStyle:{"font-size":"20px","margin-bottom":"0"}},[t._v("\n\t\t\t\t\t"+t._s(t.profile.second_name)+"\n\t\t\t\t\t"+t._s(t.profile.first_name)+"\n\t\t\t\t\t"+t._s(t.profile.patronymic)+"\n\t\t\t\t")]),t._v(" "),i("p",{staticStyle:{"font-size":"16px","margin-top":"2px"}},[t._v("\n\t\t\t\t\t"+t._s(t.profile.position)+"\n\t\t\t\t")])]):t._e()])])},staticRenderFns:[]};var F={name:"profile",components:{HeaderProfile:i("VU/8")({name:"headerProfile",computed:{profile:function(){return this.$store.getters.getProfile.profile}},methods:{}},U,!1,function(t){i("2p8z")},null,null).exports},data:function(){return{page:"",closeMenu:!1}},computed:u()({},Object(p.b)({getProfile:"getProfile"})),methods:{notif:function(){this.$router.push("/profile/notif")},edit:function(){this.$router.push("/profile/edit")},adm:function(){this.$router.push("/profile/adm")},logout:function(){var t=this;this.$store.dispatch("AUTH_LOGOUT").then(function(){t.$router.push("/auth")})}}},A={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"profile"},[i("headerProfile"),t._v(" "),i("div",{staticClass:"mainProfile"},[t.closeMenu?i("div",{staticClass:"openCloseMenuButton",staticStyle:{background:"#ADE0FC",height:"300px"},on:{click:function(e){t.closeMenu=!1}}},[i("svg",{staticClass:"openCloseMenuButton",attrs:{fill:"#347090","enable-background":"new 0 0 96 96",height:"26px",viewBox:"0 0 96 96",width:"26px","xml:space":"preserve",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[i("path",{attrs:{d:"M12,52h62.344L52.888,73.456c-1.562,1.562-1.562,4.095-0.001,5.656c1.562,1.562,4.096,1.562,5.658,0l28.283-28.284l0,0  c0.186-0.186,0.352-0.391,0.498-0.609c0.067-0.101,0.114-0.21,0.172-0.315c0.066-0.124,0.142-0.242,0.195-0.373  c0.057-0.135,0.089-0.275,0.129-0.415c0.033-0.111,0.076-0.217,0.099-0.331C87.973,48.525,88,48.263,88,48l0,0  c0-0.003-0.001-0.006-0.001-0.009c-0.001-0.259-0.027-0.519-0.078-0.774c-0.024-0.12-0.069-0.231-0.104-0.349  c-0.039-0.133-0.069-0.268-0.123-0.397c-0.058-0.139-0.136-0.265-0.208-0.396c-0.054-0.098-0.097-0.198-0.159-0.292  c-0.146-0.221-0.314-0.427-0.501-0.614L58.544,16.888c-1.562-1.562-4.095-1.562-5.657-0.001c-1.562,1.562-1.562,4.095,0,5.658  L74.343,44L12,44c-2.209,0-4,1.791-4,4C8,50.209,9.791,52,12,52z"}})])]):t._e(),t._v(" "),t.closeMenu?t._e():i("div",[i("p",[t._v("Моя почта: "+t._s(t.getProfile.email))]),t._v(" "),i("div",{staticClass:"menuProfile"},[i("div",{staticStyle:{"margin-top":"10px"}}),t._v(" "),i("router-link",{staticClass:"router-link",attrs:{to:{path:"/profile/notif"}}},[t._v("УВЕДОМЛЕНИЯ")]),t._v(" "),i("router-link",{staticClass:"router-link",attrs:{to:{path:"/profile/edit"}}},[t._v("РЕДАКТИРОВАНИЕ ПРОФИЛЯ")]),t._v(" "),t.getProfile.is_staff?i("router-link",{staticClass:"router-link",attrs:{to:{path:"/profile/adm"}}},[t._v("АДМИНИСТРИРОВАНИЕ ПРОФИЛЕЙ")]):t._e(),t._v(" "),i("div",{staticStyle:{height:"15px"}}),t._v(" "),i("p",{staticClass:"router-link",on:{click:function(e){return t.logout()}}},[t._v("ВЫЙТИ")])],1),t._v(" "),i("p",{staticClass:"openCloseMenuButton",staticStyle:{"margin-top":"10px"},on:{click:function(e){t.closeMenu=!0}}},[t._v("Скрыть меню")])]),t._v(" "),i("router-view")],1)],1)},staticRenderFns:[]};var T=i("VU/8")(F,A,!1,function(t){i("z64s")},null,null).exports,P={name:"maxInput",props:{value:{type:String,default:""},max:{type:Number,default:250}},computed:{internalValue:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},methods:{onKeyDown:function(t){this.value.length>=this.max&&t.keyCode>=48&&t.keyCode<=90&&t.preventDefault()}}},M={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("input",{directives:[{name:"model",rawName:"v-model",value:t.internalValue,expression:"internalValue"}],domProps:{value:t.internalValue},on:{keydown:t.onKeyDown,input:function(e){e.target.composing||(t.internalValue=e.target.value)}}})},staticRenderFns:[]},O={name:"edirProfile",components:{MaxInput:i("VU/8")(P,M,!1,null,null,null).exports},data:function(){return{password1:"",password2:"",first_name:"",second_name:"",patronymic:"",position:"",is_get_notif_email:"",image:"",error:"",passError:"",upload:""}},created:function(){this.$store.dispatch("USER_REQUEST"),this.is_get_notif_email=this.$store.getters.getProfile.is_get_notif_email},methods:{onFileChange:function(t){this.upload="Загружается...";var e=t.target.files||t.dataTransfer.files;if(e.length){var i=new FormData;i.append("profile.photo",e[0]),this.file=i,this.createImage(e[0]),this.upload=""}},createImage:function(t){new Image;var e=new FileReader,i=this;e.onload=function(t){i.image=t.target.result},e.readAsDataURL(t)},onKeyDown:function(t){this.second_name.length>=50&&t.preventDefault()},passwordValidation:function(t){this.password1&&this.password1!=this.password2?this.passError="Пароли не совпадают.":this.passError=""},editProfile:function(){var t=this;try{if(this.password1&&this.password1!=this.password2)return void(this.error="Форма заполнена неверно.");this.passError="",this.error="Профиль обновляется...",this.file&&this.$store.dispatch("USER_UPDATE_IMAGE",{token:this.$store.getters.token,data:this.file}).then(function(e){t.error="Данные профиля изменены.",t.file=""}).catch(function(e){console.log(e),t.error="Ошибка. Что-то пошло не так."});var e={profile:{}};this.password1&&(e.password=this.password1),e.is_get_notif_email=this.is_get_notif_email,this.first_name&&(e.profile.first_name=this.first_name),this.second_name&&(e.profile.second_name=this.second_name),this.patronymic&&(e.profile.patronymic=this.patronymic),this.position&&(e.profile.position=this.position),this.$store.dispatch("USER_UPDATE",{token:this.$store.getters.token,data:e}).then(function(e){t.error="Данные профиля изменены.",t.password1="",t.password2="",t.first_name="",t.second_name="",t.patronymic="",t.position="",setTimeout(function(){t.error=""},3e3)}).catch(function(e){t.error="Ошибка. Что-то пошло не так."})}catch(t){console.log(t),this.error="Ошибка. Что-то пошло не так..."}}}},$={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"editProfile"},[i("h3",{staticClass:"header"},[t._v("РЕДАКТИРОВАНИЕ ПРОФИЛЯ")]),t._v(" "),i("div",{staticClass:"editProfile2Colon"},[i("div",[i("img",{attrs:{src:t.image||"https://img.icons8.com/wired/512/000000/document.png"}})]),t._v(" "),i("div",{staticStyle:{"margin-left":"25px"}},[t.error?i("p",{staticStyle:{color:"red"}},[t._v(t._s(t.error))]):t._e(),t._v(" "),i("p"),t._v("Получать уведомления на почту"),i("input",{directives:[{name:"model",rawName:"v-model",value:t.is_get_notif_email,expression:"is_get_notif_email"}],attrs:{type:"checkbox",name:"common","true-value":"true","false-value":"false"},domProps:{checked:Array.isArray(t.is_get_notif_email)?t._i(t.is_get_notif_email,null)>-1:t._q(t.is_get_notif_email,"true")},on:{change:function(e){var i=t.is_get_notif_email,n=e.target,s=n.checked?"true":"false";if(Array.isArray(i)){var r=t._i(i,null);n.checked?r<0&&(t.is_get_notif_email=i.concat([null])):r>-1&&(t.is_get_notif_email=i.slice(0,r).concat(i.slice(r+1)))}else t.is_get_notif_email=s}}}),t._v(" "),i("p",[t._v("Выбрать новый аватар")]),t._v(" "),i("input",{ref:"file",staticClass:"inputfile",attrs:{type:"file",id:"file",name:"file",accept:"image/*"},on:{change:t.onFileChange}}),t._v(" "),i("p",[t._v(t._s(t.upload))]),t._v(" "),i("form",{on:{submit:function(t){t.preventDefault()}}},[i("p",[t._v("Пароль")]),t._v(" "),i("MaxInput",{staticClass:"search-box",attrs:{type:"password",placeholder:"Введите новый пароль",autocomplete:"false",max:50},nativeOn:{keyup:function(e){return t.passwordValidation(e)}},model:{value:t.password1,callback:function(e){t.password1=e},expression:"password1"}}),t._v(" "),t.password1?i("div",[i("p",[t._v("Повторите пароль")]),t._v(" "),i("MaxInput",{staticClass:"search-box",attrs:{type:"password",max:50,placeholder:"Повторите пароль"},nativeOn:{keyup:function(e){return t.passwordValidation(e)}},model:{value:t.password2,callback:function(e){t.password2=e},expression:"password2"}}),t._v(" "),t.passError?i("p",{staticStyle:{color:"red",display:"inline-block",margin:"0","margin-left":"5px"}},[t._v(t._s(t.passError))]):t._e()],1):t._e(),t._v(" "),i("p",[t._v("Имя")]),t._v(" "),i("MaxInput",{staticClass:"search-box",attrs:{type:"text",max:50,placeholder:"Введите новое имя"},model:{value:t.first_name,callback:function(e){t.first_name=e},expression:"first_name"}}),t._v(" "),i("p",[t._v("Фамилия")]),t._v(" "),i("MaxInput",{staticClass:"search-box",attrs:{type:"text",max:50,placeholder:"Введите новую фамилию"},on:{keydown:t.onKeyDown},model:{value:t.second_name,callback:function(e){t.second_name=e},expression:"second_name"}}),t._v(" "),i("p",[t._v("Отчество")]),t._v(" "),i("MaxInput",{staticClass:"search-box",attrs:{type:"text",max:50,placeholder:"Введите новое отчество"},model:{value:t.patronymic,callback:function(e){t.patronymic=e},expression:"patronymic"}}),t._v(" "),i("p",[t._v("Должность")]),t._v(" "),i("MaxInput",{staticClass:"search-box",attrs:{type:"text",max:200,placeholder:"Введите новую должность"},model:{value:t.position,callback:function(e){t.position=e},expression:"position"}}),t._v(" "),i("div",{staticStyle:{height:"35px"}}),t._v(" "),i("button",{attrs:{type:"button"},on:{click:function(e){return t.editProfile()}}},[t._v("РЕДАКТИРОВАТЬ")]),t._v(" "),i("br")],1)])])])},staticRenderFns:[]};var N=i("VU/8")(O,$,!1,function(t){i("LHS3")},null,null).exports,z=i("fZjL"),R=i.n(z),I={name:"grid",props:{id:String,columns:Array},data:function(){var t={};return this.columns.forEach(function(e){t[e]=1}),{h:null,sortKey:"",filterKey:"",sortOrders:t,error:""}},created:function(){this.$store.dispatch("USER_REQUEST"),this.$store.dispatch("DOCS_REQUEST")},computed:u()({},Object(p.b)({getProfile:"getProfile",getDocs:"getDocs",getDocsOld:"getDocsOld"}),{filteredHeroes:function(){var t={};this.columns.forEach(function(e){t[e]=1});var e=this.filterKey&&this.filterKey.toLowerCase(),i=(this.sortOrders[""],this.heroes||this.h);return e&&(i=i.filter(function(t){return R()(t).some(function(i){return String(t[i]).toLowerCase().indexOf(e)>-1})})),i},heroes:function(){var t=this;if("all"==this.$route.params.id)return this.getDocs;if("common"==this.$route.params.id)return this.getDocs.filter(function(t){return t.doc.common});if("myDocs"==this.$route.params.id)return this.getDocs.filter(function(e){return e.user.id==t.getProfile.id&&0==e.status});if("signature-request"==this.$route.params.id)return this.getDocs.filter(function(t){return 2==t.status});if("signature-success"==this.$route.params.id)return this.getDocs.filter(function(t){return 6==t.status});if("available-to-me"==this.$route.params.id)return this.getDocs.filter(function(t){return 5==t.status});if("notif"==this.id){var e=this.getDocsOld.filter(function(t){return 3==t.status||2==t.status});return e.forEach(function(t){3==t.status&&(t.message="Ваш документ подписали."),2==t.status&&(t.message="Вас просят подписать документ.")}),e}return null}}),filters:{capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)}},methods:{sortBy:function(t){this.sortKey=t,this.sortOrders[t]=-1*this.sortOrders[t]},toDoc:function(t){var e=this,i=this.getProfile.id;this.$store.dispatch("DOC_EDIT_NOTIF",{user:i,notif:t.id,pk3:0}).then(function(i){e.$store.dispatch("DOCS_REQUEST"),e.$router.push("/document/"+t.doc.id)}).catch(function(t){console.log(t),e.error="Ошибка. Что-то пошло не так."})},hideNotif:function(t){var e=this,i=this.getProfile.id;this.$store.dispatch("DOC_EDIT_NOTIF",{user:i,notif:this.filteredHeroes[t].id,pk3:1}).catch(function(t){console.log(t),e.error="Ошибка. Что-то пошло не так."})}}},q={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"grid"},[0==t.filteredHeroes.length?i("div",[i("p",[t._v("Так грустно... Здесь ничего нет.")]),t._v(" "),i("svg",{attrs:{fill:"#7cb0c1",height:"44",viewBox:"0 0 24 24",width:"44",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{staticClass:"heroicon-ui",attrs:{d:"M12 22a10 10 0 1 1 0-20 10 10 0 0 1 0 20zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm-3.54-4.54a5 5 0 0 1 7.08 0 1 1 0 0 1-1.42 1.42 3 3 0 0 0-4.24 0 1 1 0 0 1-1.42-1.42zM9 11a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm6 0a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"}})])]):t._e(),t._v(" "),0!=t.filteredHeroes.length?i("div",[i("form",{staticClass:"search"},[i("p",{staticStyle:{display:"inline-block",margin:"0","margin-bottom":"15px","margin-right":"20px"}},[t._v("Поиск по всем столбцам")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.filterKey,expression:"filterKey"}],attrs:{placeholder:"Введите что-то",name:"query"},domProps:{value:t.filterKey},on:{input:function(e){e.target.composing||(t.filterKey=e.target.value)}}})]),t._v(" "),t.error?i("p",{staticStyle:{color:"red"}},[t._v(t._s(t.error))]):t._e(),t._v(" "),i("div",{staticStyle:{display:"flex","align-items":"flex-start"}},[i("table",{staticClass:"showData"},[i("thead",[i("tr",t._l(t.columns,function(e,n){return i("th",{key:n,class:{active:t.sortKey==e},on:{click:function(i){return t.sortBy(e.title)}}},[t._v("\n                                "+t._s(t._f("capitalize")(e.title))+"\n                                "),i("span",{staticClass:"arrow",class:t.sortOrders[e]>0?"asc":"dsc"})])}),0)]),t._v(" "),i("tbody",t._l(t.filteredHeroes,function(e,n){return i("tr",{key:n,style:{background:e.rowBackg},on:{click:function(i){return t.toDoc(e)}}},t._l(t.columns,function(n,s){return i("td",{key:s},[t._v("\n                                "+t._s(e[n.key])+"\n                            ")])}),0)}),0)]),t._v(" "),"notif"==t.id?i("table",{staticStyle:{border:"white 3px solid","border-radius":"5px"}},[t._m(0),t._v(" "),i("tbody",t._l(t.filteredHeroes,function(e,n){return i("tr",{key:n},[i("td",{staticStyle:{padding:"0px"}},[3!=e.status?i("div",{staticStyle:{padding:"7.5px",magrin:"0"}},[t._v(" ")]):t._e(),t._v(" "),3==e.status?i("svg",{staticStyle:{margin:"0",padding:"7px",cursor:"pointer"},attrs:{height:"17px",viewBox:"0 0 33 33",width:"18px","xml:space":"preserve",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},on:{click:function(e){return t.hideNotif(n)}}},[i("g",{attrs:{id:"Cancel",stroke:"black","stroke-width":"1"}},[i("path",{attrs:{"clip-rule":"evenodd",d:"M16,0C7.163,0,0,7.163,0,16c0,8.836,7.163,16,16,16   c8.836,0,16-7.163,16-16C32,7.163,24.836,0,16,0z M16,30C8.268,30,2,23.732,2,16C2,8.268,8.268,2,16,2s14,6.268,14,14   C30,23.732,23.732,30,16,30z",fill:"#121313","fill-rule":"evenodd"}}),t._v(" "),i("path",{attrs:{"clip-rule":"evenodd",d:"M22.729,21.271l-5.268-5.269l5.238-5.195   c0.395-0.391,0.395-1.024,0-1.414c-0.394-0.39-1.034-0.39-1.428,0l-5.231,5.188l-5.309-5.31c-0.394-0.396-1.034-0.396-1.428,0   c-0.394,0.395-0.394,1.037,0,1.432l5.301,5.302l-5.331,5.287c-0.394,0.391-0.394,1.024,0,1.414c0.394,0.391,1.034,0.391,1.429,0   l5.324-5.28l5.276,5.276c0.394,0.396,1.034,0.396,1.428,0C23.123,22.308,23.123,21.667,22.729,21.271z",fill:"#121313","fill-rule":"evenodd"}})])]):t._e()])])}),0)]):t._e()])]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",{staticStyle:{border:"0"}},[this._v(" ")])])])}]};var B=i("VU/8")(I,q,!1,function(t){i("9qY2")},null,null).exports,H=i("Xxa5"),V=i.n(H),Z=i("exGp"),G=i.n(Z),Q={name:"adm",data:function(){return{self_id:this.$store.getters.getProfile.id,fileCabinet:"",fileCabinetsNew:[],editFileCabinetName:[],users:[],email:"",is_staff:!1,error:"",columns:[{name:"Пользователь",code:"full_name"},{name:"Email",code:"email"},{name:"Администратор",code:"is_staff"}]}},created:function(){var t=this;this.$store.dispatch("DOCS_FILTER");for(var e=0;e<this.fileCabinets.length;e++)this.editFileCabinetName.push(!1);for(var i=0;i<this.fileCabinets.length;i++)this.fileCabinetsNew.push(this.fileCabinets[i].name);this.$store.commit("DOC_FOLDER_PAGE_PROFILE",3),this.$store.dispatch("USERS_REQUEST").then(function(e){t.users=e})},computed:{filteredEvents:function(){var t=this;return this.users.filter(function(e){return t.self_id!=e.id})},fileCabinets:function(){return this.$store.getters.getFileCabinets}},methods:{addUser:function(){var t=this;0==(""==this.email?"":/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,24}))$/.test(this.email))?this.error="Неправильный email.":(this.error="Пользователь создается...",this.$store.dispatch("AUTH_SIGNUP",{email:this.email,is_staff:this.is_staff}).then(function(e){t.email="",t.error="Пользователь создан."}).catch(function(e){t.error="Пользователь не создан. Такой пользователь уже существует."}))},addFileCabinet:function(){var t=this;this.$store.dispatch("DOCS_FILE_CABINET_CREATE",this.fileCabinet).then(function(e){t.fileCabinet="",t.error="Картотека создана."}).catch(function(e){console.log(e),t.error="Картотека не создана. Что-то пошло не так."})},editNameFileCabinet:function(t){var e=this;this.$store.dispatch("DOCS_FILE_CABINET_EDIT",{id:this.fileCabinets[t].id,name:this.fileCabinetsNew[t]}).then(function(i){e.editFileCabinetName[t]=!1,e.fileCabinetsNew.splice(t,1,"")}).catch(function(t){console.log(t),e.error="Имя не изменено. Что-то пошло не так."})},deleteFileCabinet:function(t){var e=this;return G()(V.a.mark(function i(){return V.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,confirm('Вы уверены, что хотите удалить картотеку "'+e.fileCabinets[t].name+'"? Это действие также удалит все документы, которые есть в картотеке!',{title:"Подтверждение"});case 2:i.sent&&e.$store.dispatch("DOCS_FILE_CABINET_DELETE",{id:e.fileCabinets[t].id}).then(function(t){e.$store.commit("DOCS_FILE_CABINET",""),e.error="Картотека удалена."}).catch(function(t){e.error="Ошибка. Что-то пошло не так."});case 4:case"end":return i.stop()}},i,e)}))()},editStaff:function(t){var e=this;this.$store.dispatch("USER_UPDATE_STAFF",{id:t.id,is_staff:t.is_staff}).catch(function(t){e.error="Ошибка. Что-то пошло не так."})}}},K={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"adm"},[t._m(0),t._v(" "),t.error?i("p",{staticStyle:{color:"red"}},[t._v(t._s(t.error))]):t._e(),t._v(" "),i("hr"),t._v(" "),i("a",{attrs:{name:"addFileCabinet"}}),t._v(" "),i("form",{staticStyle:{"margin-bottom":"40px"},on:{submit:function(e){return e.preventDefault(),t.addFileCabinet(e)}}},[i("h3",[t._v("Создать картотеку")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.fileCabinet,expression:"fileCabinet"}],attrs:{required:"",type:"text",placeholder:"Введите название картотеки"},domProps:{value:t.fileCabinet},on:{input:function(e){e.target.composing||(t.fileCabinet=e.target.value)}}}),t._v(" "),i("button",{attrs:{type:"submit"}},[t._v("СОЗДАТЬ")]),t._v(" "),i("br")]),t._v(" "),i("hr"),t._v(" "),i("a",{attrs:{name:"addDoc"}}),t._v(" "),i("form",{staticStyle:{"margin-bottom":"40px"},on:{submit:function(e){return e.preventDefault(),t.addDoc(e)}}},[i("h3",[t._v("Создать пользователя")]),t._v(" "),i("p",[t._v("Email того, кому нужно создать аккаунт")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{required:"",type:"email",placeholder:"Введите email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),t._v(" "),i("p",{staticStyle:{display:"inline-block","padding-left":"15px","padding-right":"7px"}},[t._v(" Администратор")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.is_staff,expression:"is_staff"}],staticClass:"checkbox",attrs:{type:"checkbox",name:"common","true-value":"1","false-value":"0"},domProps:{checked:Array.isArray(t.is_staff)?t._i(t.is_staff,null)>-1:t._q(t.is_staff,"1")},on:{change:function(e){var i=t.is_staff,n=e.target,s=n.checked?"1":"0";if(Array.isArray(i)){var r=t._i(i,null);n.checked?r<0&&(t.is_staff=i.concat([null])):r>-1&&(t.is_staff=i.slice(0,r).concat(i.slice(r+1)))}else t.is_staff=s}}}),t._v(" "),i("br"),t._v(" "),i("button",{attrs:{type:"submit"}},[t._v("СОЗДАТЬ")]),t._v(" "),i("br")]),t._v(" "),i("hr"),t._v(" "),i("a",{attrs:{name:"fileCabManage"}}),t._v(" "),i("h3",[t._v("Управление картотеками")]),t._v(" "),i("table",{staticStyle:{"margin-bottom":"40px"}},[t._m(1),t._v(" "),i("tbody",t._l(t.fileCabinets,function(e,n){return i("tr",{key:n},[i("td",[t.editFileCabinetName[n]?t._e():i("div",{staticClass:"editNameFileCabinet"},[t._v("\n                        "+t._s(e.name)+"\n                    ")]),t._v(" "),t.editFileCabinetName[n]?i("div",{staticClass:"editNameFileCabinet2"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.fileCabinetsNew[n],expression:"fileCabinetsNew[j]"}],staticStyle:{"min-width":"150px","margin-left":"-8px"},attrs:{type:"text",placeholder:"Картотека"},domProps:{value:t.fileCabinetsNew[n]},on:{input:function(e){e.target.composing||t.$set(t.fileCabinetsNew,n,e.target.value)}}}),t._v(" "),i("svg",{staticStyle:{"margin-left":"10px",cursor:"pointer","margin-top":"7px"},attrs:{height:"22px",viewBox:"0 0 33 33",width:"22px","xml:space":"preserve",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},on:{click:function(e){t.editFileCabinetName.splice(n,1,!1),t.fileCabinetsNew.splice(n,1,t.fileCabinets[n].name)}}},[i("g",{attrs:{id:"Cancel",stroke:"black","stroke-width":"1"}},[i("path",{attrs:{"clip-rule":"evenodd",d:"M16,0C7.163,0,0,7.163,0,16c0,8.836,7.163,16,16,16   c8.836,0,16-7.163,16-16C32,7.163,24.836,0,16,0z M16,30C8.268,30,2,23.732,2,16C2,8.268,8.268,2,16,2s14,6.268,14,14   C30,23.732,23.732,30,16,30z",fill:"#121313","fill-rule":"evenodd"}}),t._v(" "),i("path",{attrs:{"clip-rule":"evenodd",d:"M22.729,21.271l-5.268-5.269l5.238-5.195   c0.395-0.391,0.395-1.024,0-1.414c-0.394-0.39-1.034-0.39-1.428,0l-5.231,5.188l-5.309-5.31c-0.394-0.396-1.034-0.396-1.428,0   c-0.394,0.395-0.394,1.037,0,1.432l5.301,5.302l-5.331,5.287c-0.394,0.391-0.394,1.024,0,1.414c0.394,0.391,1.034,0.391,1.429,0   l5.324-5.28l5.276,5.276c0.394,0.396,1.034,0.396,1.428,0C23.123,22.308,23.123,21.667,22.729,21.271z",fill:"#121313","fill-rule":"evenodd"}})])]),t._v(" "),i("svg",{staticStyle:{"margin-left":"10px",cursor:"pointer","margin-top":"7px"},attrs:{height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},on:{click:function(e){return t.editNameFileCabinet(n)}}},[i("path",{staticClass:"heroicon-ui",attrs:{d:"M6.3 12.3l10-10a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1 0 1.4l-10 10a1 1 0 0 1-.7.3H7a1 1 0 0 1-1-1v-4a1 1 0 0 1 .3-.7zM8 16h2.59l9-9L17 4.41l-9 9V16zm10-2a1 1 0 0 1 2 0v6a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h6a1 1 0 0 1 0 2H4v14h14v-6z"}})])]):t._e()]),t._v(" "),i("td",[t.editFileCabinetName[n]?t._e():i("button",{staticStyle:{"margin-top":"0"},attrs:{type:"button"},on:{click:function(e){return t.editFileCabinetName.splice(n,1,!0)}}},[t._v("ПЕРЕИМЕНОВАТЬ")]),t._v(" "),i("button",{staticStyle:{"margin-top":"0"},attrs:{type:"button"},on:{click:function(e){return t.deleteFileCabinet(n)}}},[t._v("УДАЛИТЬ КАРТОТЕКУ")]),t._v(" "),i("br")])])}),0)]),t._v(" "),i("hr"),t._v(" "),i("a",{attrs:{name:"usersManage"}}),t._v(" "),i("h3",[t._v("Настройка прав пользователей")]),t._v(" "),i("table",[i("thead",[i("tr",t._l(t.columns,function(e,n){return i("th",{key:n},[t._v("\n                    "+t._s(e.name)+"\n                ")])}),0)]),t._v(" "),i("tbody",t._l(t.filteredEvents,function(e,n){return i("tr",{key:n},t._l(t.columns,function(n,s){return i("td",{key:s},["is_staff"==n.code?i("div",{staticClass:"editAdm"},[t._v("\n                        "+t._s(e[n.code])+"\n                        "),i("svg",{staticClass:"editStaff",attrs:{width:"42",height:"22",xmlns:"http://www.w3.org/2000/svg"},on:{click:function(i){e[n.code]=!e[n.code],t.editStaff(e)}}},[i("g",[i("path",{attrs:{id:"svg_2",d:"m9.27039,21.301735l21.915211,0c5.075562,0 9.204388,-4.656818 9.204388,-10.381443s-4.128826,-10.381445 -9.204388,-10.381445l-21.915211,0c-5.07556,0 -9.204386,4.65682 -9.204386,10.381445s4.128826,10.381443 9.204386,10.381443zm0,-19.774178l21.915211,0c4.59211,0 8.327774,4.213385 8.327774,9.392735s-3.735664,9.392735 -8.327774,9.392735l-21.915211,0c-4.592112,0 -8.327778,-4.213383 -8.327778,-9.392735s3.735666,-9.392735 8.327778,-9.392735z"}}),t._v(" "),e[n.code]?t._e():i("path",{attrs:{id:"svg_3",d:"m10.851694,17.103909c3.539827,0 6.419889,-2.827057 6.419889,-6.301741s-2.880062,-6.301731 -6.419889,-6.301731s-6.419897,2.827055 -6.419897,6.301731s2.880064,6.301741 6.419897,6.301741zm0,-11.495476c2.917307,0 5.291121,2.33012 5.291121,5.193735s-2.373814,5.193739 -5.291121,5.193739s-5.291124,-2.330116 -5.291124,-5.193739s2.373245,-5.193735 5.291124,-5.193735z"}}),t._v(" "),e[n.code]?i("path",{attrs:{id:"svg_8",d:"m28.549137,17.339874c3.539829,0 6.419888,-2.827057 6.419888,-6.301739s-2.880058,-6.301733 -6.419888,-6.301733s-6.419895,2.827055 -6.419895,6.301733s2.880062,6.301739 6.419895,6.301739zm0,-11.495476c2.917309,0 5.291119,2.33012 5.291119,5.193737s-2.37381,5.193737 -5.291119,5.193737s-5.291126,-2.330116 -5.291126,-5.193737s2.373245,-5.193737 5.291126,-5.193737z"}}):t._e()])])]):i("div",[t._v("\n                        "+t._s(e[n.code])+"\n                    ")])])}),0)}),0)])])},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"fastLink"},[i("p",[t._v("Быстрый переход:")]),t._v(" "),i("a",{attrs:{href:"#addFileCabinet"}},[t._v("Создать картотеку ")]),t._v(" "),i("a",{attrs:{href:"#addDoc"}},[t._v("Создать пользователя ")]),t._v(" "),i("a",{attrs:{href:"#fileCabManage"}},[t._v("Управление картотеками ")]),t._v(" "),i("a",{attrs:{href:"#usersManage"}},[t._v("Настройка прав пользователей")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("Название")]),e("th",[this._v("Действия")])])])}]};var j=i("VU/8")(Q,K,!1,function(t){i("A7fx")},"data-v-f983e60e",null).exports,W={name:"preview",props:{typeFile:{type:String,default:""}}},J={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"preview"},[i("div",{staticClass:"bb0"}),t._v(" "),t._m(0),t._v(" "),i("div"),t._v(" "),i("p",[t._v(t._s(t.typeFile.toUpperCase()))]),t._v(" "),i("div")])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"bb1"},[e("div",{staticClass:"bb2"})])}]};var X=i("VU/8")(W,J,!1,function(t){i("ebea")},null,null).exports,Y={name:"document",components:{Preview:X},props:{id:String},data:function(){return{file:"",doc:{},title:"",type:"",fileWithSignature:"ddd",error:"",errorConfirm:"",isPreConfirm:!1,isConfirm:!1,isCancelSign:!1,confirm:"",confirmFromApp:"",cancelCause:"",cancelFile:""}},created:function(){this.$store.dispatch("DOCS_REQUEST"),this.$store.getters.getDoc(this.id)||this.$router.push("/404"),this.doc=this.$store.getters.getDoc(this.id);var t=this.doc.doc.title.split(".");this.type=t[t.length-1],this.title=this.doc.doc.title.replace("."+this.type,""),this.type=this.type.toLowerCase()},methods:{viewDoc:function(){var t=this;try{this.error="Открывается...",this.$store.dispatch("DOC_DOWNLOAD",this.doc.doc.id).then(function(e){var i="",n="https://edms-mtuci.herokuapp.com/"+e.file;i="jpg"!=t.type&&"jpeg"!=t.type&&"png"!=t.type?"https://docs.google.com/viewerng/viewer?url="+n:n,window.open(i,"_blank"),t.error="Открылось!",setTimeout(function(){t.error=""},3e3)}).catch(function(e){console.log(e),t.error="Ошибка. Что-то пошло не так."})}catch(t){console.log(t),this.error="Ошибка. Что-то пошло не так."}},viewSign:function(){""==this.error?this.error=this.doc.doc.signature:this.error=""},download:function(){var t=this;this.error="Скачивается...";var e=this.doc.doc.title;this.$store.dispatch("DOC_DOWNLOAD",this.doc.doc.id).then(function(i){g()({url:"https://edms-mtuci.herokuapp.com/"+i.file,method:"GET",responseType:"blob"}).then(function(i){var n=window.URL.createObjectURL(new Blob([i.data])),s=document.createElement("a");s.href=n,s.setAttribute("download",e),document.body.appendChild(s),s.click(),t.error="Скачано!",setTimeout(function(){t.error=""},3e3)}).catch(function(e){console.log(e),t.error="Ошибка. Что-то пошло не так."})}).catch(function(e){console.log(e),t.error="Ошибка. Что-то пошло не так."})},downloadSign:function(){console.log("downloadSign")},editDoc:function(){this.$router.push("/document/"+this.id+"/edit")},confirmCode:function(){this.confirmFromApp="1234",this.isConfirm=!0,this.isPreConfirm=!1},cancelSign:function(){console.log(this.cancelCause)},onFileChangeCancel:function(t){},addSignature:function(){var t=this;this.confirm==this.confirmFromApp?(this.errorConfirm="Ставим подпись...",this.$store.dispatch("DOC_SIGNATURE",{id:this.id,first:0}).then(function(e){t.doc.status=3,t.isConfirm=!1,t.error="Подпись успешно поставлена!",t.confirmFromApp="",t.confirm="",t.$store.dispatch("DOCS_REQUEST"),setTimeout(function(){t.error=""},3e3)}).catch(function(e){console.log(e),t.isConfirm=!1,t.confirm="",t.error="Ошибка. Что-то пошло не так."})):this.errorConfirm="Неправильный код подтверждения."},repeatSignatures:function(){console.log("repeatSignatures")},deleteDoc:function(){var t=this;return G()(V.a.mark(function e(){return V.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,confirm("Вы уверены, что хотите удалить документ?",{title:"Подтверждение"});case 2:e.sent&&t.$store.dispatch("DOC_DELETE",t.id).then(function(e){t.$router.push("/documents/all")}).catch(function(e){console.log(e),t.error="Ошибка. Что-то пошло не так."});case 4:case"end":return e.stop()}},e,t)}))()}}},tt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"document"},[i("div",{staticClass:"buttons"},[t.doc.doc.size/1024/1024<25?i("button",{on:{click:function(e){return t.viewDoc()}}},[t._v("СМОТРЕТЬ ДОКУМЕНТ")]):t._e(),t._v(" "),t.doc.doc.size/1024/1024<25?i("button",{on:{click:function(e){return t.viewSign()}}},[t._v("СМОТРЕТЬ ПОДПИСЬ (не работает)")]):t._e(),t._v(" "),i("button",{on:{click:function(e){return t.download()}}},[t._v("СКАЧАТЬ")]),t._v(" "),i("button",{on:{click:function(e){return t.downloadSign()}}},[t._v("СКАЧАТЬ ПОДПИСЬ (не работает)")]),t._v(" "),0==t.doc.status&&t.doc.user.id==this.$store.getters.getProfile.id?i("button",{on:{click:function(e){return t.editDoc()}}},[t._v("РЕДАКТИРОВАТЬ")]):t._e(),t._v(" "),2==t.doc.status?i("button",{on:{click:function(e){t.isPreConfirm=!0}}},[t._v("ПОДПИСАТЬ/ОТКЛОНИТЬ")]):t._e(),t._v(" "),0==t.doc.status&&t.doc.user.id==this.$store.getters.getProfile.id?i("button",{on:{click:function(e){return t.repeatSignatures()}}},[t._v("ЗАПУСТИТЬ ЦЕПОЧКУ ПОДПИСЕЙ СНОВА (не работает)")]):t._e()]),t._v(" "),i("div",{staticClass:"document2Colon"},[i("div",[i("preview",{attrs:{typeFile:t.type}}),t._v(" "),0==t.doc.status?i("button",{staticStyle:{"margin-top":"20px","margin-left":"6px",background:"rgb(243, 92, 92)"},on:{click:function(e){return t.deleteDoc()}}},[t._v("УДАЛИТЬ")]):t._e()],1),t._v(" "),i("div",{staticStyle:{"margin-left":"25px","margin-top":"0px"}},[i("h3",{staticClass:"header"},[t._v(t._s(t.title))]),t._v(" "),t.error?i("p",{staticStyle:{color:"red"}},[t._v(t._s(t.error))]):t._e(),t._v(" "),i("table",{staticClass:"aboutDoc"},[t._m(0),t._v(" "),i("tbody",[i("tr",[i("td",[t._v("Регистрационный номер")]),t._v(" "),i("td",[t._v(t._s(t.doc.doc.id))])]),t._v(" "),i("tr",[i("td",[t._v("Владелец")]),t._v(" "),i("td",[t._v(t._s(t.doc.user.profile.full_name)+" ("+t._s(t.doc.user.email)+")")])]),t._v(" "),i("tr",[i("td",[t._v("Картотека")]),t._v(" "),i("td",[t._v(t._s(t.doc.doc.fileCabinet.name))])]),t._v(" "),i("tr",[i("td",[t._v("Общий доступ")]),t._v(" "),i("td",[t._v(t._s(t.doc.doc.common?"да":"нет"))])]),t._v(" "),i("tr",[i("td",[t._v("Дата добавления")]),t._v(" "),i("td",[t._v(t._s(t.doc.doc.date))])]),t._v(" "),i("tr",[i("td",[t._v("Описание")]),t._v(" "),i("td",[t._v(t._s(t.doc.doc.description))])])])]),t._v(" "),t.isPreConfirm?i("div",{staticClass:"confirm"},[i("div",{staticStyle:{display:"grid","grid-template-columns":"auto max-content"}},[i("div"),t._v(" "),i("svg",{staticStyle:{"margin-right":"10px",cursor:"pointer","margin-top":"7px"},attrs:{height:"22px",viewBox:"0 0 33 33",width:"22px","xml:space":"preserve",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},on:{click:function(e){t.isPreConfirm=!1}}},[i("g",{attrs:{id:"Cancel",stroke:"black","stroke-width":"1"}},[i("path",{attrs:{"clip-rule":"evenodd",d:"M16,0C7.163,0,0,7.163,0,16c0,8.836,7.163,16,16,16   c8.836,0,16-7.163,16-16C32,7.163,24.836,0,16,0z M16,30C8.268,30,2,23.732,2,16C2,8.268,8.268,2,16,2s14,6.268,14,14   C30,23.732,23.732,30,16,30z",fill:"#121313","fill-rule":"evenodd"}}),t._v(" "),i("path",{attrs:{"clip-rule":"evenodd",d:"M22.729,21.271l-5.268-5.269l5.238-5.195   c0.395-0.391,0.395-1.024,0-1.414c-0.394-0.39-1.034-0.39-1.428,0l-5.231,5.188l-5.309-5.31c-0.394-0.396-1.034-0.396-1.428,0   c-0.394,0.395-0.394,1.037,0,1.432l5.301,5.302l-5.331,5.287c-0.394,0.391-0.394,1.024,0,1.414c0.394,0.391,1.034,0.391,1.429,0   l5.324-5.28l5.276,5.276c0.394,0.396,1.034,0.396,1.428,0C23.123,22.308,23.123,21.667,22.729,21.271z",fill:"#121313","fill-rule":"evenodd"}})])])]),t._v(" "),i("p",{staticStyle:{margin:"0"}},[t._v("\n\t\t\t\t\t\tПросмотрите документ с помощью кнопок СМОТРЕТЬ ДОКУМЕНТ (если документ меньше 25мб) \n\t\t\t\t\t\tили СКАЧАТЬ. Примите решение, поставить подпись или отклонить документ.\n\t\t\t\t\t")]),t._v(" "),i("div",{staticClass:"signButtons",staticStyle:{"margin-top":"5px"}},[i("div"),t._v(" "),i("button",{staticStyle:{background:"rgb(243, 92, 92)"},on:{click:function(e){t.isCancelSign=!0,t.isPreConfirm=!1}}},[t._v("ОТКЛОНИТЬ")]),t._v(" "),i("button",{on:{click:function(e){return t.confirmCode()}}},[t._v("ПОСТАВИТЬ ПОДПИСЬ")]),t._v(" "),i("div")])]):t._e(),t._v(" "),t.isCancelSign?i("div",{staticClass:"confirm",staticStyle:{height:"380px"},on:{submit:function(e){return e.preventDefault(),t.cancelSign(e)}}},[i("div",{staticStyle:{display:"grid","grid-template-columns":"auto max-content"}},[i("div"),t._v(" "),i("svg",{staticStyle:{"margin-right":"10px",cursor:"pointer","margin-top":"7px"},attrs:{height:"22px",viewBox:"0 0 33 33",width:"22px","xml:space":"preserve",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},on:{click:function(e){t.isCancelSign=!1}}},[i("g",{attrs:{id:"Cancel",stroke:"black","stroke-width":"1"}},[i("path",{attrs:{"clip-rule":"evenodd",d:"M16,0C7.163,0,0,7.163,0,16c0,8.836,7.163,16,16,16   c8.836,0,16-7.163,16-16C32,7.163,24.836,0,16,0z M16,30C8.268,30,2,23.732,2,16C2,8.268,8.268,2,16,2s14,6.268,14,14   C30,23.732,23.732,30,16,30z",fill:"#121313","fill-rule":"evenodd"}}),t._v(" "),i("path",{attrs:{"clip-rule":"evenodd",d:"M22.729,21.271l-5.268-5.269l5.238-5.195   c0.395-0.391,0.395-1.024,0-1.414c-0.394-0.39-1.034-0.39-1.428,0l-5.231,5.188l-5.309-5.31c-0.394-0.396-1.034-0.396-1.428,0   c-0.394,0.395-0.394,1.037,0,1.432l5.301,5.302l-5.331,5.287c-0.394,0.391-0.394,1.024,0,1.414c0.394,0.391,1.034,0.391,1.429,0   l5.324-5.28l5.276,5.276c0.394,0.396,1.034,0.396,1.428,0C23.123,22.308,23.123,21.667,22.729,21.271z",fill:"#121313","fill-rule":"evenodd"}})])])]),t._v(" "),i("p",{staticStyle:{"margin-top":"0"}},[t._v("\n\t\t\t\t\t\tНапишите, почему документ отклонен. Вы также можете загрузить исправленный документ \n\t\t\t\t\t\t(не обязательно). Тот, кто просил вас поставить подпись, сможет просмотреть ваш \n\t\t\t\t\t\tвариант документа. \n\t\t\t\t\t")]),t._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.cancelCause,expression:"cancelCause"}],attrs:{placeholder:"Введите комментарий"},domProps:{value:t.cancelCause},on:{input:function(e){e.target.composing||(t.cancelCause=e.target.value)}}}),t._v(" "),i("input",{staticClass:"cancelFile",attrs:{type:"file",id:"file",name:"file"},on:{change:t.onFileChangeCancel}}),t._v(" "),i("div",{staticClass:"confirmButtons"},[i("div"),t._v(" "),i("button",{on:{click:function(e){return t.cancelSign()}}},[t._v("ОТКЛОНИТЬ И ОТПРАВИТЬ КОММЕНТАРИЙ")]),t._v(" "),i("div")]),t._v(" "),t.errorConfirm?i("p",{staticStyle:{color:"red","text-align":"center",padding:"5px"}},[t._v(t._s(t.errorConfirm))]):t._e()]):t._e(),t._v(" "),t.isConfirm?i("form",{staticClass:"confirm",class:{addHeight:t.errorConfirm,notAddHeight:!t.errorConfirm},on:{submit:function(e){return e.preventDefault(),t.addSignature(e)}}},[i("div",{staticStyle:{display:"grid","grid-template-columns":"auto max-content"}},[i("div"),t._v(" "),i("svg",{staticStyle:{"margin-right":"10px",cursor:"pointer","margin-top":"7px"},attrs:{height:"22px",viewBox:"0 0 33 33",width:"22px","xml:space":"preserve",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},on:{click:function(e){t.isConfirm=!1,t.confirmFromApp="",t.confirm=""}}},[i("g",{attrs:{id:"Cancel",stroke:"black","stroke-width":"1"}},[i("path",{attrs:{"clip-rule":"evenodd",d:"M16,0C7.163,0,0,7.163,0,16c0,8.836,7.163,16,16,16   c8.836,0,16-7.163,16-16C32,7.163,24.836,0,16,0z M16,30C8.268,30,2,23.732,2,16C2,8.268,8.268,2,16,2s14,6.268,14,14   C30,23.732,23.732,30,16,30z",fill:"#121313","fill-rule":"evenodd"}}),t._v(" "),i("path",{attrs:{"clip-rule":"evenodd",d:"M22.729,21.271l-5.268-5.269l5.238-5.195   c0.395-0.391,0.395-1.024,0-1.414c-0.394-0.39-1.034-0.39-1.428,0l-5.231,5.188l-5.309-5.31c-0.394-0.396-1.034-0.396-1.428,0   c-0.394,0.395-0.394,1.037,0,1.432l5.301,5.302l-5.331,5.287c-0.394,0.391-0.394,1.024,0,1.414c0.394,0.391,1.034,0.391,1.429,0   l5.324-5.28l5.276,5.276c0.394,0.396,1.034,0.396,1.428,0C23.123,22.308,23.123,21.667,22.729,21.271z",fill:"#121313","fill-rule":"evenodd"}})])])]),t._v(" "),i("p",{staticStyle:{"margin-top":"0"}},[t._v('Заглушка - код "1234". На ваше мобильное приложение отправлен код подтверждения. Введите его ниже.')]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.confirm,expression:"confirm"}],staticClass:"code",attrs:{required:"",type:"text",placeholder:"Введите код подтверждения"},domProps:{value:t.confirm},on:{input:function(e){e.target.composing||(t.confirm=e.target.value)}}}),t._v(" "),t._m(1),t._v(" "),t.errorConfirm?i("p",{staticStyle:{color:"red","text-align":"center",padding:"5px"}},[t._v(t._s(t.errorConfirm))]):t._e()]):t._e()])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th"),e("th")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"confirmButtons"},[e("div"),this._v(" "),e("button",{attrs:{type:"submit"}},[this._v("ПОДТВЕРДИТЬ")]),this._v(" "),e("div")])}]};var et=i("VU/8")(Y,tt,!1,function(t){i("1pgQ")},null,null).exports,it={name:"editDocument",components:{Preview:X},props:{id:String},data:function(){return{file:"",doc:{},title:"",type:"",description:"",common:!1,error:"",fileCabinets:[],fileCabinet:""}},created:function(){this.$store.dispatch("DOCS_REQUEST"),this.$store.getters.getDoc(this.id)||this.$router.push("/documents/all"),this.doc=this.$store.getters.getDoc(this.id);var t=this.doc.doc.title.split(".");this.type=t[t.length-1],this.title=this.doc.doc.title.replace("."+this.type,""),this.type=this.type.toLowerCase(),this.description=this.doc.doc.description,this.common=this.doc.doc.common,this.fileCabinets=this.$store.getters.getFileCabinets,this.fileCabinet=this.doc.doc.fileCabinet},methods:{editDoc:function(){var t=this,e={id:this.id,title:this.title+"."+this.type,description:this.description,common:this.common,fileCabinet_id:this.fileCabinet.id};this.$store.dispatch("DOC_EDIT",e).then(function(e){t.$store.dispatch("DOCS_REQUEST").then(function(e){t.$router.push("/document/"+t.id)}).catch(function(e){console.log(e),t.error="Что-то пошло не так."})}).catch(function(e){console.log(e),t.error="Что-то пошло не так."})}}},nt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"editDocument"},[i("div",{staticClass:"document2Colon"},[i("div",[i("preview",{attrs:{typeFile:t.type}})],1),t._v(" "),i("form",{staticStyle:{"margin-left":"25px","margin-top":"-15px"},on:{submit:function(e){return e.preventDefault(),t.editDoc(e)}}},[t.error?i("p",{staticStyle:{color:"red"}},[t._v(t._s(t.error))]):t._e(),t._v(" "),i("p",[t._v("Название")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"code",attrs:{type:"text",placeholder:"Введите название"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}}),t._v(" "),i("p",[t._v("Картотека")]),t._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:t.fileCabinet,expression:"fileCabinet"}],on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.fileCabinet=e.target.multiple?i:i[0]}}},t._l(t.fileCabinets,function(e,n){return i("option",{key:n,domProps:{value:e}},[t._v(t._s(e.name))])}),0),t._v(" "),i("p",[t._v("Описание")]),t._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],attrs:{placeholder:"Введите описание"},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}}),t._v(" "),i("p"),t._v(" Общий доступ "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.common,expression:"common"}],attrs:{type:"checkbox","true-value":"true","false-value":"false"},domProps:{checked:Array.isArray(t.common)?t._i(t.common,null)>-1:t._q(t.common,"true")},on:{change:function(e){var i=t.common,n=e.target,s=n.checked?"true":"false";if(Array.isArray(i)){var r=t._i(i,null);n.checked?r<0&&(t.common=i.concat([null])):r>-1&&(t.common=i.slice(0,r).concat(i.slice(r+1)))}else t.common=s}}}),t._v(" "),i("div",{staticStyle:{height:"35px"}}),t._v(" "),i("button",{attrs:{type:"submit"}},[t._v("РЕДАКТИРОВАТЬ")]),t._v(" "),i("br")])])])},staticRenderFns:[]};var st=i("VU/8")(it,nt,!1,function(t){i("3NFs")},null,null).exports,rt=i("u4Bf"),ot={name:"account",components:{Preview:X,draggable:i.n(rt).a},data:function(){return{title:"",typeFile:!1,description:"",selectedUser:"",selectedUsers:[],selectedUser2:"",selectedUsers2:[],selectedUsers20:[],users:[],common:0,selfSignature:0,error:null,file:"",disable:!0,fileCabinets:[],fileCabinet:""}},created:function(){var t=this;this.$store.dispatch("USERS_EMAILS").then(function(e){t.users=e.filter(function(e){return e.id!=t.$store.getters.getProfile.id})}),this.fileCabinets=this.$store.getters.getFileCabinets,this.fileCabinet=this.$store.getters.getFileCabinet},methods:{onFileChange:function(t){var e=t.target.files||t.dataTransfer.files;if(e.length){this.file=e[0];var i=e[0].name.split(".");this.typeFile=i[i.length-1],this.title=e[0].name.replace("."+this.typeFile,""),this.file=e[0],this.disable=!1}},blobToFile:function(t,e){return t.lastModifiedDate=new Date,t.name=e,t},addUser:function(t){var e=this;1==t?""!=this.selectedUser&&(this.selectedUsers.push(this.selectedUser),this.users=this.users.filter(function(t){return t!=e.selectedUser}),this.selectedUser=""):2==t&&""!=this.selectedUser2&&(this.selectedUsers2.push(this.selectedUser2),this.users=this.users.filter(function(t){return t!=e.selectedUser2}),this.selectedUser2="")},deleteSelectedUser:function(t,e){1==t?this.selectedUsers=this.selectedUsers.filter(function(t){return t!=e}):2==t&&(this.selectedUsers2=this.selectedUsers2.filter(function(t){return t!=e})),this.users.push(e)},addDoc:function(){var t=this;this.disable=!0,this.error="Загружается...";var e=new FormData;if(this.file){var i=new File([this.file],this.title+"."+this.typeFile,{type:this.file.type});e.append("file",i),e.append("size",this.file.size)}e.append("user_id",this.$store.getters.getProfile.id),this.title&&e.append("title",this.title+"."+this.typeFile),this.description&&e.append("description",this.description),this.fileCabinet&&e.append("fileCabinet_id",this.fileCabinet.id),e.common=this.common?e.append("common",!0):e.append("common",!1);var n={d:e};this.selectedUsers&&(n.signature_request=this.selectedUsers),this.selectedUsers2&&(n.show_request=this.selectedUsers2),n.selfSignature=this.selfSignature,this.$store.dispatch("DOC_UPLOAD",n).then(function(e){t.$store.dispatch("DOCS_REQUEST").then(function(i){t.error="Загружено!",t.$router.push({name:"document",params:{id:e.id.toString()}})}).catch(function(t){console.log(t)})})}}},at={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"addDoc"},[i("h3",{staticClass:"header"},[t._v("ДОБАВЛЕНИЕ ДОКУМЕНТА")]),t._v(" "),i("div",{staticClass:"addDoc2Colon"},[i("div",{staticClass:"img"},[t.typeFile?i("preview",{attrs:{typeFile:t.typeFile}}):i("img",{attrs:{src:"https://img.icons8.com/wired/512/000000/document.png"}})],1),t._v(" "),i("div",{staticStyle:{"margin-left":"25px"}},[i("form",{on:{submit:function(e){return e.preventDefault(),t.addDoc(e)}}},[i("input",{attrs:{type:"file",id:"file",name:"file"},on:{change:t.onFileChange}}),t._v(" "),i("p",[t._v("Имя файла")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"filename",attrs:{required:"",type:"text",placeholder:"Введите имя",autocomplete:"usernameNew"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}}),t._v(" "),i("p",[t._v("Картотека")]),t._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:t.fileCabinet,expression:"fileCabinet"}],on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.fileCabinet=e.target.multiple?i:i[0]}}},t._l(t.fileCabinets,function(e,n){return i("option",{key:n,domProps:{value:e}},[t._v(t._s(e.name))])}),0),t._v(" "),i("div",{staticStyle:{border:"1px solid #347090","border-radius":"3px",padding:"15px","margin-top":"10px"}},[i("p",{staticStyle:{"margin-top":"0px"}},[t._v("Запросить подпись. Порядок выбранных пользователей можно менять перетаскиванием.")]),t._v(" "),i("draggable",{model:{value:t.selectedUsers,callback:function(e){t.selectedUsers=e},expression:"selectedUsers"}},t._l(t.selectedUsers,function(e){return i("div",{key:e.id,staticClass:"selectedUserWithCancel"},[i("p",{staticClass:"selectedUser"},[t._v(t._s(e.full_name)+" - "+t._s(e.position))]),t._v(" "),i("svg",{staticClass:"deleteSelectedUser",attrs:{height:"21px",viewBox:"0 0 31 32",width:"22px","xml:space":"preserve",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},on:{click:function(i){return t.deleteSelectedUser(1,e)}}},[i("g",{attrs:{id:"Cancel",stroke:"#347090","stroke-width":"1"}},[i("path",{attrs:{"clip-rule":"evenodd",d:"M16,0C7.163,0,0,7.163,0,16c0,8.836,7.163,16,16,16   c8.836,0,16-7.163,16-16C32,7.163,24.836,0,16,0z M16,30C8.268,30,2,23.732,2,16C2,8.268,8.268,2,16,2s14,6.268,14,14   C30,23.732,23.732,30,16,30z",fill:"#121313","fill-rule":"evenodd"}}),t._v(" "),i("path",{attrs:{"clip-rule":"evenodd",d:"M22.729,21.271l-5.268-5.269l5.238-5.195   c0.395-0.391,0.395-1.024,0-1.414c-0.394-0.39-1.034-0.39-1.428,0l-5.231,5.188l-5.309-5.31c-0.394-0.396-1.034-0.396-1.428,0   c-0.394,0.395-0.394,1.037,0,1.432l5.301,5.302l-5.331,5.287c-0.394,0.391-0.394,1.024,0,1.414c0.394,0.391,1.034,0.391,1.429,0   l5.324-5.28l5.276,5.276c0.394,0.396,1.034,0.396,1.428,0C23.123,22.308,23.123,21.667,22.729,21.271z",fill:"#121313","fill-rule":"evenodd"}})])])])}),0),t._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedUser,expression:"selectedUser"}],on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selectedUser=e.target.multiple?i:i[0]}}},t._l(t.users,function(e){return i("option",{key:e.id,domProps:{value:e}},[t._v(t._s(e.full_name)+" - "+t._s(e.position))])}),0),t._v(" "),i("button",{attrs:{type:"button"},on:{click:function(e){return t.addUser(1)}}},[t._v("ДОБАВИТЬ")]),t._v(" "),i("br")],1),t._v(" "),i("div",{staticStyle:{border:"1px solid #347090","border-radius":"3px",padding:"15px","margin-top":"10px"}},[i("p",{staticStyle:{"margin-top":"0"}},[t._v("\n                            Пользователи, у которых были запрошены подписи, могут просматривать документ. \n                            Ниже можно указать дополнительных пользователей, которые не должны подписывать документ, \n                            но могут его просматривать. Порядок выбранных пользователей можно менять перетаскиванием.\n                        ")]),t._v(" "),i("draggable",{model:{value:t.selectedUsers2,callback:function(e){t.selectedUsers2=e},expression:"selectedUsers2"}},t._l(t.selectedUsers2,function(e){return i("div",{key:e.id,staticClass:"selectedUserWithCancel"},[i("p",{staticClass:"selectedUser"},[t._v(t._s(e.full_name)+" - "+t._s(e.position))]),t._v(" "),i("svg",{staticClass:"deleteSelectedUser",attrs:{height:"21px",viewBox:"0 0 31 32",width:"22px","xml:space":"preserve",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},on:{click:function(i){return t.deleteSelectedUser(2,e)}}},[i("g",{attrs:{id:"Cancel",stroke:"#347090","stroke-width":"1"}},[i("path",{attrs:{"clip-rule":"evenodd",d:"M16,0C7.163,0,0,7.163,0,16c0,8.836,7.163,16,16,16   c8.836,0,16-7.163,16-16C32,7.163,24.836,0,16,0z M16,30C8.268,30,2,23.732,2,16C2,8.268,8.268,2,16,2s14,6.268,14,14   C30,23.732,23.732,30,16,30z",fill:"#121313","fill-rule":"evenodd"}}),t._v(" "),i("path",{attrs:{"clip-rule":"evenodd",d:"M22.729,21.271l-5.268-5.269l5.238-5.195   c0.395-0.391,0.395-1.024,0-1.414c-0.394-0.39-1.034-0.39-1.428,0l-5.231,5.188l-5.309-5.31c-0.394-0.396-1.034-0.396-1.428,0   c-0.394,0.395-0.394,1.037,0,1.432l5.301,5.302l-5.331,5.287c-0.394,0.391-0.394,1.024,0,1.414c0.394,0.391,1.034,0.391,1.429,0   l5.324-5.28l5.276,5.276c0.394,0.396,1.034,0.396,1.428,0C23.123,22.308,23.123,21.667,22.729,21.271z",fill:"#121313","fill-rule":"evenodd"}})])])])}),0),t._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedUser2,expression:"selectedUser2"}],on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selectedUser2=e.target.multiple?i:i[0]}}},t._l(t.users,function(e){return i("option",{key:e.id,domProps:{value:e}},[t._v(t._s(e.full_name)+" - "+t._s(e.position))])}),0),t._v(" "),i("button",{attrs:{type:"button"},on:{click:function(e){return t.addUser(2)}}},[t._v("ДОБАВИТЬ")]),t._v(" "),i("br")],1),t._v(" "),i("div",{staticStyle:{height:"15px"}}),t._v(" "),i("p",[t._v("Описание")]),t._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],attrs:{placeholder:"Опишите документ"},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}}),t._v(" "),i("p"),t._v(" Общий доступ "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.common,expression:"common"}],attrs:{type:"checkbox",name:"common","true-value":"1","false-value":"0"},domProps:{checked:Array.isArray(t.common)?t._i(t.common,null)>-1:t._q(t.common,"1")},on:{change:function(e){var i=t.common,n=e.target,s=n.checked?"1":"0";if(Array.isArray(i)){var r=t._i(i,null);n.checked?r<0&&(t.common=i.concat([null])):r>-1&&(t.common=i.slice(0,r).concat(i.slice(r+1)))}else t.common=s}}}),t._v(" "),i("div",{staticStyle:{height:"35px"}}),t._v(" "),i("button",{class:{disabled:this.disable},attrs:{type:"submit"}},[t._v("СОЗДАТЬ")]),t._v(" "),i("br")]),t._v(" "),t.error?i("p",{staticStyle:{color:"red"}},[t._v(" "+t._s(t.error)+" ")]):t._e()])])])},staticRenderFns:[]};var ct=i("VU/8")(ot,at,!1,function(t){i("jGaP")},null,null).exports,lt={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"account"},[e("div",{staticClass:"account2"},[e("p",[this._v("Не найдено.")])])])}]};var dt=i("VU/8")({name:"account"},lt,!1,function(t){i("FhJ5")},null,null).exports,ut={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"help"},[i("h2",[t._v("Помощь")]),t._v(" "),i("h4",[t._v("Переход на главную страницу")]),t._v(" "),i("p",[t._v('Нажмите на логотип "СЭД МТУСИ".')]),t._v(" "),i("h4",[t._v("Создание документа")]),t._v(" "),i("p",[t._v("Нажмите на иконку создания документа со знаком плюса, которая расположена \n\t\tв панели сверху, с правой стороны.")]),t._v(" "),i("h4",[t._v("Просмотр документа")]),t._v(" "),i("p",[t._v("Просматрировать содержимое можно только у документов размером меньше 25мб.")]),t._v(" "),i("h4",[t._v("Профиль")]),t._v(" "),i("p",[t._v("Профиль позволяет просматривать уведомления, изменять личную информацию, \n\t\tвыйти из аккаунта и, в случае администратора, управлять правами пльзователей.\n\t\tЗайти в профиль можно, кликнув на круглую иконку с картинкой вашего профиля \n\t\tв панели сверху, с правой стороны.")]),t._v(" "),i("h4",[t._v("Уведомления")]),t._v(" "),i("p",[t._v("Уведомления можно посмотреть в профиле или кликнув на иконку с колокольчиком в \n\t\tпанели сверху, с правой стороны.")]),t._v(" "),i("h4",[t._v("Администрирование")]),t._v(" "),i("p",[t._v('Через вкладку в профиле "Администрирование профилей" (присутствует, если пользователь \n\t\tявляется администратором) можно добавлять новых пользователей по их email, а \n\t\tтакже изменять права (администратор или нет). Для изменения права достаточно \n\t\tнайти в таблице нужного пользователя и кликнуть по иконке в столбце "Администратор".')])])}]};var pt,ft,ht,vt,mt,_t=i("VU/8")({name:"Help",data:function(){return{msg:"Welcome to Your Vue.js App"}}},ut,!1,function(t){i("oJYL")},"data-v-22035d4e",null).exports,Ct=i("bOdI"),gt=i.n(Ct),wt={profile:{},users:[]},yt={getProfile:function(t){return t.profile},getUsers:function(t){return wt.users},isProfileLoaded:function(t){return!!t.profile.name}},xt=(pt={},gt()(pt,"USER_REQUEST",function(t){var e=t.commit,i=t.dispatch,n=t.rootState;return new r.a(function(t,s){g.a.get(o+"/api/users/get_user_from_token/",{headers:{Authorization:"Token "+n.auth.token}}).then(function(t){e("USER_SUCCESS",t.data[0]),i("DOCS_REQUEST")}).catch(function(t){try{s(t.response.request.response)}catch(e){s(t)}i("AUTH_LOGOUT")})})}),gt()(pt,"USERS_REQUEST",function(t){t.commit,t.dispatch;var e=t.rootState;return new r.a(function(t,i){g.a.get(o+"/api/users/i",{headers:{Authorization:"Token "+e.auth.token}}).then(function(e){e.data.forEach(function(t){t.full_name=t.profile.full_name}),t(e.data)}).catch(function(t){try{i(t.response.request.response)}catch(e){i(t)}})})}),gt()(pt,"USERS_EMAILS",function(t){t.commit,t.dispatch,t.rootState;return new r.a(function(t,e){g.a.get(o+"/api/users/emails/").then(function(e){t(e.data)}).catch(function(t){try{e(t.response.request.response)}catch(i){e(t)}})})}),gt()(pt,"USER_UPDATE",function(t,e){var i=t.commit;t.dispatch;return new r.a(function(t,n){g.a.get(o+"/api/users/get_user_from_token/",{headers:{Authorization:"Token "+e.token}}).then(function(s){g.a.patch(o+"/api/users/i/"+s.data[0].id,e.data,{headers:{Authorization:"Token "+e.token}}).then(function(e){i("USER_SUCCESS",e.data),t(e)}).catch(function(t){try{n(t.response.request.response)}catch(e){n(t)}})}).catch(function(t){try{n(t.response.request.response)}catch(e){n(t)}})})}),gt()(pt,"USER_UPDATE_IMAGE",function(t,e){var i=t.commit,n=(t.dispatch,t.state);return new r.a(function(t,s){g.a.patch(o+"/api/users/i/"+n.profile.id,e.data,{headers:{Authorization:"Token "+e.token,"Content-Type":"multipart/form-data"}}).then(function(e){t(e),i("USER_SUCCESS",e.data)}).catch(function(t){try{s(t.response.request.response)}catch(e){s(t)}})})}),gt()(pt,"USER_UPDATE_STAFF",function(t,e){t.commit,t.dispatch;var i=t.rootState;return new r.a(function(t,n){g.a.patch(o+"/api/users/i/"+e.id,{is_staff:e.is_staff},{headers:{Authorization:"Token "+i.auth.token}}).catch(function(t){try{n(t.response.request.response)}catch(e){n(t)}})})}),gt()(pt,"USER_CONFIRM_UPDATE_PASSWORD",function(t,e){t.commit,t.dispatch;return new r.a(function(t,i){g.a.post(o+"/api/users/rest_auth/password/reset/",{email:e}).then(function(e){t(e)}).catch(function(t){try{i(t.response.request.response)}catch(e){i(t)}})})}),gt()(pt,"USER_CHANGE_PASSWORD",function(t,e){t.commit,t.dispatch;return new r.a(function(t,i){console.log(e),g.a.post(o+"/api/users/rest_auth/password/reset/confirm/",{uid:e.uid,token:e.token,new_password1:e.password1,new_password2:e.password2}).then(function(e){t(e)}).catch(function(t){try{i(t.response.request.response)}catch(e){i(t)}})})}),pt),bt=gt()({},"USER_SUCCESS",function(t,e){n.a.set(t,"profile",e)}),St={state:wt,getters:yt,actions:xt,mutations:bt},kt={state:{token:localStorage.getItem("user-token")||""},getters:{token:function(t){return t.token},isAuthenticated:function(t){return!!t.token}},actions:(ft={},gt()(ft,"AUTH_SIGNUP",function(t,e){t.commit,t.dispatch;var i=t.state;return new r.a(function(t,n){g.a.post(o+"/api/users/send_invite/",{email:e.email,is_staff:e.is_staff},{headers:{Authorization:"Token "+i.token}}).then(function(e){console.log(e.data),t(e.data.password)}).catch(function(t){try{n(t.response.request.response)}catch(e){n(t)}})})}),gt()(ft,"AUTH_REQUEST",function(t,e){var i=t.commit,n=t.dispatch;t.state;return new r.a(function(t,s){g.a.post(o+"/api/users/get_auth_token/",{email:e.email,password:e.password}).then(function(e){var s=e.data.token;i("AUTH_TOKEN",e.data),localStorage.setItem("user-token",s),g.a.defaults.headers.common.Authorization=s,n("USER_REQUEST"),t(e)}).catch(function(t){localStorage.removeItem("user-token");try{s(t.response.request.response)}catch(e){s(t)}})})}),gt()(ft,"AUTH_LOGOUT",function(t){var e=t.commit;t.dispatch;return new r.a(function(t,i){e("AUTH_LOGOUT"),localStorage.removeItem("user-token"),delete g.a.defaults.headers.common.Authorization,t()})}),ft),mutations:(ht={},gt()(ht,"AUTH_TOKEN",function(t,e){t.token=e.token}),gt()(ht,"AUTH_LOGOUT",function(t){t.token="",t.profile={}}),ht)},Et={state:{docs:[],docsFiltering:[],fileCabinets:[],fileCabinet:""},getters:{getDocsOld:function(t){return t.docs},getDocs:function(t){return t.docsFiltering},getDoc:function(t){return function(e){return t.docs.filter(function(t){return t.doc.id==e})[0]}},getFileCabinets:function(t){return t.fileCabinets},getFileCabinet:function(t){return t.fileCabinet}},actions:(vt={},gt()(vt,"DOCS_REQUEST",function(t){var e=t.commit,i=t.dispatch,n=t.rootState;return new r.a(function(t,s){g.a.get(o+"/api/users/"+n.user.profile.id+"/notif/",{headers:{Authorization:"Token "+n.auth.token}}).then(function(s){try{s.data.forEach(function(t){t.full_name=t.user.profile.full_name,t.title=t.doc.title,t.date_doc=t.doc.date,t.date_notif=t.date,t.fileCabinet=t.doc.fileCabinet.name;var e=t.is_read.filter(function(t){return t.id==n.user.profile.id}),i=0==t.status&&t.user.id==n.user.profile.id;t.rowBackg=0!=e.length||i?"white":"#dcdbfc"}),e("DOCS_SUCCESS",s.data),i("DOCS_FILTER"),t(s.data)}catch(t){console.log(t)}}).catch(function(t){try{s(t.response.request.response)}catch(e){s(t)}})})}),gt()(vt,"DOC_EDIT_NOTIF",function(t,e){t.commit;var i=t.dispatch,n=t.rootState;return new r.a(function(t,s){console.log("data hide",e),g.a.get(o+"/api/users/"+e.user+"/notif/"+e.notif+"/"+e.pk3+"/",{headers:{Authorization:"Token "+n.auth.token}}).then(function(e){try{i("DOCS_REQUEST"),t(e.data)}catch(t){console.log(t)}}).catch(function(t){try{s(t.response.request.response)}catch(e){s(t)}})})}),gt()(vt,"DOCS_FILTER",function(t){var e=t.commit,i=(t.dispatch,t.rootState);return new r.a(function(t,n){g.a.get(o+"/api/docs/fileCabinets").then(function(t){e("DOCS_FILE_CABINETS",t.data),""==i.doc.fileCabinet&&e("DOCS_FILE_CABINET",t.data[0]);var n=i.doc.docs.filter(function(t){return t.doc.fileCabinet.id==i.doc.fileCabinet.id});e("DOCS_FILTER_SUCCESS",n)}).catch(function(t){try{n(t.response.request.response)}catch(e){n(t)}})})}),gt()(vt,"DOCS_FILE_CABINET_CREATE",function(t,e){t.commit;var i=t.dispatch,n=t.rootState;return new r.a(function(t,s){g.a.post(o+"/api/docs/fileCabinets",{name:e},{headers:{Authorization:"Token "+n.auth.token}}).then(function(e){i("DOCS_FILTER"),t(e)}).catch(function(t){try{s(t.response.request.response)}catch(e){s(t)}})})}),gt()(vt,"DOCS_FILE_CABINET_EDIT",function(t,e){t.commit;var i=t.dispatch,n=t.rootState;return new r.a(function(t,s){g.a.patch(o+"/api/docs/fileCabinets/"+e.id,{name:e.name},{headers:{Authorization:"Token "+n.auth.token}}).then(function(e){i("DOCS_FILTER"),t(e)}).catch(function(t){try{s(t.response.request.response)}catch(e){s(t)}})})}),gt()(vt,"DOCS_FILE_CABINET_DELETE",function(t,e){t.commit;var i=t.dispatch,n=t.rootState;return new r.a(function(t,s){g.a.delete(o+"/api/docs/fileCabinets/"+e.id,{headers:{Authorization:"Token "+n.auth.token}}).then(function(e){i("DOCS_FILTER"),t(e)}).catch(function(t){try{s(t.response.request.response)}catch(e){s(t)}})})}),gt()(vt,"DOC_UPLOAD",function(t,e){t.commit;var i=t.dispatch,n=t.rootState;return new r.a(function(t,s){g.a.post(o+"/api/docs/i",e.d,{headers:{"Content-Type":"multipart/form-data",Authorization:"Token "+n.auth.token}}).then(function(n){i("DOC_SIGNATURE",{id:n.data.id,first:1}),e.signature_request&&(e.signature_request.forEach(function(t,e){console.log(t),g.a.post(o+"/api/users/notif",{doc_id:n.data.id,user_id:t.id,status:0==e?2:1,queue:e}).catch(function(t){try{s(t.response.request.response)}catch(e){s(t)}})}),e.show_request.forEach(function(t){console.log(t),g.a.post(o+"/api/users/notif",{doc_id:n.data.id,user_id:t.id,status:5}).catch(function(t){try{s(t.response.request.response)}catch(e){s(t)}})}),i("DOCS_REQUEST"),t(n.data))}).catch(function(t){try{s(t.response.request.response)}catch(e){s(t)}})})}),gt()(vt,"DOC_DOWNLOAD",function(t,e){t.commit,t.dispatch;var i=t.rootState;return new r.a(function(t,n){g.a.get(o+"/api/docs/download/"+e+"/",{headers:{Authorization:"Token "+i.auth.token}}).then(function(e){t(e.data)}).catch(function(t){console.log("response.data");try{n(t.response.request.response)}catch(e){n(t)}})})}),gt()(vt,"DOC_SIGNATURE",function(t,e){t.commit,t.dispatch;var i=t.rootState;return new r.a(function(t,n){g.a.get(o+"/api/docs/add_signature/"+e.id+"/"+e.first+"/",{headers:{Authorization:"Token "+i.auth.token}}).then(function(e){t(e.data)}).catch(function(t){try{n(t.response.request.response)}catch(e){n(t)}})})}),gt()(vt,"DOC_DELETE",function(t,e){t.commit,t.dispatch,t.rootState;return new r.a(function(t,i){g.a.delete(o+"/api/docs/i/"+e).then(function(e){t(e.data)}).catch(function(t){try{i(t.response.request.response)}catch(e){i(t)}})})}),gt()(vt,"DOC_EDIT",function(t,e){t.commit;var i=t.dispatch,n=t.rootState;return new r.a(function(t,s){var r=e.id;delete e.id,g.a.patch(o+"/api/docs/i/"+r,e,{headers:{Authorization:"Token "+n.auth.token}}).then(function(e){i("DOCS_REQUEST"),t(e)}).catch(function(t){try{s(t.response.request.response)}catch(e){s(t)}})})}),vt),mutations:(mt={},gt()(mt,"DOCS_SUCCESS",function(t,e){n.a.set(t,"docs",e)}),gt()(mt,"DOCS_FILTER_SUCCESS",function(t,e){n.a.set(t,"docsFiltering",e)}),gt()(mt,"DOCS_FILE_CABINETS",function(t,e){n.a.set(t,"fileCabinets",e)}),gt()(mt,"DOCS_FILE_CABINET",function(t,e){n.a.set(t,"fileCabinet",e)}),gt()(mt,"DOC_REQUEST_SUCCESS",function(t,e){t.doc.push(e)}),gt()(mt,"DOC_FOLDER_PAGE",function(t,e){n.a.set(t,"page",e)}),gt()(mt,"DOC_FOLDER_PAGE_PROFILE",function(t,e){n.a.set(t,"pageProfile",e)}),mt)},Dt=i("424j");n.a.use(p.a);var Lt=new p.a.Store({modules:{user:St,auth:kt,doc:Et},strict:!1,plugins:[Object(Dt.a)()]}),Ut=i("sUu7");n.a.use(b.a),n.a.use(Ut.a);var Ft=function(t,e,i){Lt.getters.isAuthenticated?i():i("/auth")},At=new b.a({mode:"history",base:"/app",routes:[{path:"/",component:L,children:[{path:"",redirect:"/documents/all"},{path:"documents/:id",meta:{title:"Главная, СЭД МТУСИ"},component:B,props:{columns:[{key:"title",title:"Название"},{key:"full_name",title:"Владелец"},{key:"date_doc",title:"Дата добавления"}]}}],beforeEnter:Ft},{path:"/auth",name:"auth",meta:{title:"Вход, СЭД МТУСИ"},component:l,beforeEnter:function(t,e,i){Lt.getters.isAuthenticated?i("/"):i()}},{path:"/help",name:"help",meta:{title:"Помощь, СЭД МТУСИ"},component:_t},{path:"/addDoc",name:"addDoc",meta:{title:"Добавить документ, СЭД МТУСИ"},component:ct,beforeEnter:Ft},{path:"/document/:id",name:"document",meta:{title:"Документ, СЭД МТУСИ"},component:et,props:!0,beforeEnter:Ft},{path:"/document/:id/edit",name:"editDocument",meta:{title:"Редактировать документ, СЭД МТУСИ"},component:st,props:!0,beforeEnter:Ft},{path:"/profile",redirect:"/profile/notif",component:T,children:[{path:"notif",name:"notif",meta:{title:"Уведомления, СЭД МТУСИ"},component:B,props:{id:"notif",columns:[{key:"full_name",title:"Инициатор"},{key:"title",title:"Документ"},{key:"message",title:"Сообщение"},{key:"date_notif",title:"Дата добавления"},{key:"fileCabinet",title:"Картотека"}]}},{path:"edit",meta:{title:"Редактировать профиль, СЭД МТУСИ"},component:N},{path:"adm",meta:{title:"Администрирование профилей, СЭД МТУСИ"},component:j,beforeEnter:function(t,e,i){Lt.getters.getProfile.is_staff?i():i("/")}}],beforeEnter:Ft},{path:"/404",meta:{title:"Страница не найдена, СЭД МТУСИ"},component:dt},{path:"*",redirect:"/404"}]});At.beforeEach(function(t,e,i){document.title=t.meta.title,i()});var Tt=At;n.a.config.productionTip=!1;var Pt=localStorage.getItem("user-token");Pt&&(g.a.defaults.headers.common.Authorization=Pt),new n.a({el:"#app",router:Tt,store:Lt,components:{App:x},template:"<App/>"})},NeqC:function(t,e){},ebea:function(t,e){},"hh+E":function(t,e){},jGaP:function(t,e){},l7vA:function(t,e){},oJYL:function(t,e){},z64s:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.427969590fbf2595c894.js.map