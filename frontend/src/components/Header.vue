<template>
  <div class="background">
    <div id="header">
      <div class="logo" @click="toMain()" title="На главную">
        <svg height="23pt" viewBox="0 0 80 80">
          <g>
            <path
              style="stroke: none; fill-rule: nonzero; fill-opacity: 1"
              d="M 45.625 37.9375 C 45.863281 38.402344 46.332031 38.667969 46.816406 38.667969 C 47.019531 38.667969 47.226562 38.621094 47.421875 38.523438 C 47.5 38.480469 55.347656 34.496094 59.21875 33.273438 C 59.921875 33.050781 60.308594 32.300781 60.085938 31.597656 C 59.867188 30.898438 59.121094 30.507812 58.414062 30.730469 C 54.335938 32.019531 46.542969 35.976562 46.210938 36.144531 C 45.554688 36.480469 45.292969 37.28125 45.625 37.9375 Z M 45.625 37.9375 "
            />
            <path
              style="stroke: none; fill-rule: nonzero; fill-opacity: 1"
              d="M 46.816406 22.667969 C 47.019531 22.667969 47.226562 22.621094 47.421875 22.523438 C 47.5 22.480469 55.347656 18.496094 59.21875 17.273438 C 59.921875 17.050781 60.308594 16.300781 60.085938 15.597656 C 59.867188 14.898438 59.121094 14.507812 58.414062 14.730469 C 54.335938 16.019531 46.542969 19.976562 46.210938 20.144531 C 45.554688 20.480469 45.292969 21.28125 45.625 21.9375 C 45.863281 22.402344 46.332031 22.667969 46.816406 22.667969 Z M 46.816406 22.667969 "
            />
            <path
              style="stroke: none; fill-rule: nonzero; fill-opacity: 1"
              d="M 78.816406 20 C 78.078125 20 77.484375 20.597656 77.484375 21.332031 L 77.484375 73.332031 C 77.484375 75.539062 75.6875 77.332031 73.484375 77.332031 L 41.484375 77.332031 L 41.484375 74.265625 C 43.425781 73.585938 48.492188 72 53.484375 72 C 65.097656 72 72.984375 74.574219 73.0625 74.597656 C 73.464844 74.734375 73.914062 74.664062 74.261719 74.414062 C 74.609375 74.164062 74.816406 73.761719 74.816406 73.332031 L 74.816406 14.667969 C 74.816406 14.042969 74.382812 13.5 73.773438 13.367188 C 73.773438 13.367188 72.726562 13.132812 70.941406 12.804688 C 70.21875 12.671875 69.519531 13.152344 69.386719 13.875 C 69.253906 14.597656 69.734375 15.292969 70.457031 15.425781 C 71.140625 15.550781 71.710938 15.664062 72.148438 15.75 L 72.148438 71.5625 C 69.128906 70.769531 62.417969 69.332031 53.484375 69.332031 C 47.671875 69.332031 41.964844 71.242188 40.203125 71.886719 C 38.632812 71.195312 33.886719 69.332031 28.148438 69.332031 C 18.964844 69.332031 11.398438 70.847656 8.148438 71.617188 L 8.148438 15.699219 C 10.8125 15.042969 18.675781 13.332031 28.148438 13.332031 C 33.011719 13.332031 37.179688 14.847656 38.816406 15.53125 L 38.816406 68 C 38.816406 68.480469 39.074219 68.925781 39.492188 69.160156 C 39.910156 69.398438 40.425781 69.390625 40.835938 69.144531 C 40.96875 69.066406 54.179688 61.175781 65.902344 57.265625 C 66.449219 57.082031 66.816406 56.574219 66.816406 56 L 66.816406 1.332031 C 66.816406 0.898438 66.601562 0.488281 66.242188 0.238281 C 65.882812 -0.0117188 65.425781 -0.0703125 65.011719 0.0859375 C 54.34375 4.085938 43.550781 10.804688 43.441406 10.871094 C 42.820312 11.261719 42.628906 12.082031 43.019531 12.707031 C 43.40625 13.332031 44.230469 13.523438 44.855469 13.132812 C 44.953125 13.070312 54.34375 7.226562 64.148438 3.285156 L 64.148438 55.046875 C 55.046875 58.207031 45.546875 63.371094 41.484375 65.683594 L 41.484375 14.667969 C 41.484375 14.160156 41.195312 13.699219 40.746094 13.472656 C 40.515625 13.359375 35.050781 10.667969 28.148438 10.667969 C 16.101562 10.667969 6.839844 13.273438 6.449219 13.386719 C 5.878906 13.546875 5.484375 14.074219 5.484375 14.667969 L 5.484375 73.335938 C 5.484375 73.75 5.679688 74.144531 6.011719 74.398438 C 6.246094 74.574219 6.527344 74.667969 6.816406 74.667969 C 6.9375 74.667969 7.0625 74.648438 7.179688 74.617188 C 7.273438 74.589844 16.492188 72 28.148438 72 C 33.023438 72 37.1875 73.519531 38.816406 74.199219 L 38.816406 77.335938 L 6.816406 77.335938 C 4.609375 77.335938 2.816406 75.539062 2.816406 73.335938 L 2.816406 21.335938 C 2.816406 20.597656 2.21875 20 1.484375 20 C 0.746094 20 0.148438 20.597656 0.148438 21.335938 L 0.148438 73.335938 C 0.148438 77.011719 3.140625 80 6.816406 80 L 73.484375 80 C 77.160156 80 80.148438 77.011719 80.148438 73.335938 L 80.148438 21.335938 C 80.148438 20.597656 79.554688 20 78.816406 20 Z M 78.816406 20 "
            />
            <path
              style="stroke: none; fill-rule: nonzero; fill-opacity: 1"
              d="M 45.625 29.9375 C 45.863281 30.402344 46.332031 30.667969 46.816406 30.667969 C 47.019531 30.667969 47.226562 30.621094 47.421875 30.523438 C 47.5 30.480469 55.347656 26.496094 59.21875 25.273438 C 59.921875 25.050781 60.308594 24.300781 60.085938 23.597656 C 59.867188 22.898438 59.121094 22.507812 58.414062 22.730469 C 54.335938 24.019531 46.542969 27.976562 46.210938 28.144531 C 45.554688 28.480469 45.292969 29.28125 45.625 29.9375 Z M 45.625 29.9375 "
            />
            <path
              style="stroke: none; fill-rule: nonzero; fill-opacity: 1"
              d="M 45.625 45.9375 C 45.863281 46.402344 46.332031 46.667969 46.816406 46.667969 C 47.019531 46.667969 47.226562 46.621094 47.421875 46.523438 C 47.5 46.480469 55.347656 42.496094 59.21875 41.273438 C 59.921875 41.050781 60.308594 40.300781 60.085938 39.597656 C 59.867188 38.898438 59.121094 38.507812 58.414062 38.730469 C 54.335938 40.019531 46.542969 43.976562 46.210938 44.144531 C 45.554688 44.480469 45.292969 45.28125 45.625 45.9375 Z M 45.625 45.9375 "
            />
            <path
              style="stroke: none; fill-rule: nonzero; fill-opacity: 1"
              d="M 32.453125 24.746094 C 24.21875 22.8125 14.863281 25.273438 14.472656 25.378906 C 13.761719 25.570312 13.335938 26.300781 13.527344 27.011719 C 13.6875 27.609375 14.226562 28 14.816406 28 C 14.929688 28 15.046875 27.984375 15.160156 27.957031 C 15.25 27.929688 24.257812 25.5625 31.84375 27.339844 C 32.558594 27.507812 33.28125 27.0625 33.449219 26.347656 C 33.617188 25.628906 33.171875 24.914062 32.453125 24.746094 Z M 32.453125 24.746094 "
            />
            <path
              style="stroke: none; fill-rule: nonzero; fill-opacity: 1"
              d="M 32.453125 32.746094 C 24.21875 30.8125 14.863281 33.273438 14.472656 33.378906 C 13.761719 33.570312 13.335938 34.300781 13.527344 35.011719 C 13.6875 35.609375 14.226562 36 14.816406 36 C 14.929688 36 15.046875 35.984375 15.160156 35.957031 C 15.25 35.929688 24.257812 33.5625 31.84375 35.339844 C 32.558594 35.507812 33.28125 35.0625 33.449219 34.347656 C 33.617188 33.628906 33.171875 32.914062 32.453125 32.746094 Z M 32.453125 32.746094 "
            />
            <path
              style="stroke: none; fill-rule: nonzero; fill-opacity: 1"
              d="M 45.625 53.9375 C 45.863281 54.402344 46.332031 54.667969 46.816406 54.667969 C 47.019531 54.667969 47.226562 54.621094 47.421875 54.523438 C 47.5 54.480469 55.347656 50.496094 59.21875 49.273438 C 59.921875 49.050781 60.308594 48.300781 60.085938 47.597656 C 59.867188 46.898438 59.121094 46.507812 58.414062 46.730469 C 54.335938 48.019531 46.542969 51.976562 46.210938 52.144531 C 45.554688 52.480469 45.292969 53.28125 45.625 53.9375 Z M 45.625 53.9375 "
            />
            <path
              style="stroke: none; fill-rule: nonzero; fill-opacity: 1"
              d="M 32.453125 40.746094 C 24.21875 38.8125 14.863281 41.273438 14.472656 41.378906 C 13.761719 41.570312 13.335938 42.300781 13.527344 43.011719 C 13.6875 43.609375 14.226562 44.003906 14.816406 44.003906 C 14.929688 44.003906 15.046875 43.984375 15.160156 43.957031 C 15.25 43.929688 24.257812 41.5625 31.84375 43.339844 C 32.558594 43.507812 33.28125 43.0625 33.449219 42.347656 C 33.617188 41.628906 33.171875 40.914062 32.453125 40.746094 Z M 32.453125 40.746094 "
            />
            <path
              style="stroke: none; fill-rule: nonzero; fill-opacity: 1"
              d="M 32.453125 56.746094 C 24.21875 54.8125 14.863281 57.273438 14.472656 57.378906 C 13.761719 57.570312 13.335938 58.300781 13.527344 59.011719 C 13.6875 59.609375 14.226562 60.003906 14.816406 60.003906 C 14.929688 60.003906 15.046875 59.984375 15.160156 59.957031 C 15.25 59.929688 24.257812 57.5625 31.84375 59.339844 C 32.558594 59.507812 33.28125 59.0625 33.449219 58.347656 C 33.617188 57.628906 33.171875 56.914062 32.453125 56.746094 Z M 32.453125 56.746094 "
            />
            <path
              style="stroke: none; fill-rule: nonzero; fill-opacity: 1"
              d="M 32.453125 48.746094 C 24.21875 46.8125 14.863281 49.273438 14.472656 49.378906 C 13.761719 49.570312 13.335938 50.300781 13.527344 51.011719 C 13.6875 51.609375 14.226562 52.003906 14.816406 52.003906 C 14.929688 52.003906 15.046875 51.984375 15.160156 51.957031 C 15.25 51.929688 24.257812 49.5625 31.84375 51.339844 C 32.558594 51.507812 33.28125 51.0625 33.449219 50.347656 C 33.617188 49.628906 33.171875 48.914062 32.453125 48.746094 Z M 32.453125 48.746094 "
            />
          </g>
        </svg>
        <p class="logoP">СЭД МТУСИ</p>
        <!-- <avatar fullname="My Sticker" size="96"></avatar> -->
      </div>

      <div class="header-right">
        <div class="icon" title="Добавить документ" @click="toAddDoc">
          <div>+</div>
          <svg fill="white" width="30px" height="30px" viewBox="0 0 32 32">
            <g fill-rule="evenodd" stroke="none" stroke-width="1">
              <g>
                <path
                  d="M19.5,3 L9.00276013,3 C7.89666625,3 7,3.89833832 7,5.00732994 L7,27.9926701 C7,29.1012878 7.89092539,30 8.99742191,30 L24.0025781,30 C25.1057238,30 26,29.1017876 26,28.0092049 L26,10.5 L26,10 L20,3 L19.5,3 L19.5,3 L19.5,3 Z M19,4 L8.9955775,4 C8.44573523,4 8,4.45526288 8,4.99545703 L8,28.004543 C8,28.5543187 8.45470893,29 8.9999602,29 L24.0000398,29 C24.5523026,29 25,28.5550537 25,28.0066023 L25,11 L20.9979131,11 C19.8944962,11 19,10.1134452 19,8.99408095 L19,4 L19,4 Z M20,4.5 L20,8.99121523 C20,9.54835167 20.4506511,10 20.9967388,10 L24.6999512,10 L20,4.5 L20,4.5 Z M15,14 L15,15 L23,15 L23,14 L15,14 L15,14 Z M10,13 L10,16 L13,16 L13,13 L10,13 L10,13 Z M11,14 L11,15 L12,15 L12,14 L11,14 L11,14 Z M10,18 L10,21 L13,21 L13,18 L10,18 L10,18 Z M11,19 L11,20 L12,20 L12,19 L11,19 L11,19 Z M15,19 L15,20 L23,20 L23,19 L15,19 L15,19 Z M10,23 L10,26 L13,26 L13,23 L10,23 L10,23 Z M11,24 L11,25 L12,25 L12,24 L11,24 L11,24 Z M15,24 L15,25 L23,25 L23,24 L15,24 L15,24 Z"
                />
              </g>
            </g>
          </svg>
        </div>
        <div
          class="icon"
          title="Уведомления"
          @mouseenter="notifHover = true"
          @mouseleave="notifHover = false"
          @click="toNotif"
        >
          <div :style="{ color: notifColor }">{{ notif }}</div>
          <svg
            :style="{ fill: notifColor }"
            width="30px"
            height="30px"
            viewBox="25 0 15 78"
          >
            <g id="Layer_2">
              <g id="Layer_3">
                <path
                  d="M54.2,54.4l-5.1-6.3c-0.5-0.7-0.8-1.5-0.8-2.4v-13c0-8.1-5.4-15.3-13.2-17.5v-5.1c0-2.8-2.3-5-5-5s-5,2.3-5,5v5    c-7.9,2.3-13.3,9.5-13.2,17.6v13c0,0.9-0.3,1.7-0.8,2.4l-5.1,6.3c-0.4,0.5-0.7,1.2-0.7,1.9v7.9h49.8v-7.9    C54.9,55.6,54.6,54.9,54.2,54.4z M28,10.1c0-1.1,0.9-2,2-2s2,0.9,2,2v4.5c-1.4-0.2-2.7-0.2-4.1,0V10.1z M51.9,61.1H8.1v-4.8    l5.1-6.3c1-1.2,1.5-2.7,1.5-4.3v-13c0-8.4,6.8-15.3,15.3-15.3s15.3,6.8,15.3,15.3v13c0,1.6,0.5,3.1,1.5,4.3l5.1,6.3V61.1z"
                />
                <path
                  d="M28,20.8v3c6.1,0,11.1,5,11.1,11.1c0,0,0,0,0,0h3C42.1,27.1,35.8,20.8,28,20.8C28,20.8,28,20.8,28,20.8z"
                />
                <path
                  d="M30,69.9c-2.9,0-5.2-2.3-5.2-5.2h-3c0,4.5,3.7,8.2,8.2,8.2c4.5,0,8.2-3.7,8.2-8.2h-3C35.2,67.6,32.9,69.9,30,69.9z"
                />
              </g>
            </g>
          </svg>
          <!-- <img :src="notifIcon"> -->
        </div>
        <img class="profile" @click="toProfile()" :title="title" :src="photo" />
      </div>
    </div>
  </div>
</template>

<script>
import { USER_PHOTO, DOCS_REQUEST } from "../store/mutation-types";
import { mapGetters } from "vuex";

export default {
  name: "Header",

  data() {
    return {
      search: "",
      n: "",
      notifHover: false,
    };
  },

  created() {
    this.$store.dispatch(USER_PHOTO);
    this.$store.dispatch(DOCS_REQUEST);
  },

  computed: {
    ...mapGetters(["getProfile", "getPhoto", "getDocsOld"]),

    photo() {
      return this.getPhoto;
    },

    title() {
      return "Открыть профиль\n" + this.getProfile.email;
    },

    notif() {
      return (
        this.getDocsOld.filter((d) => d.status == 3 || d.status == 2).length ||
        0
      );
    },

    notifColor() {
      if (this.notifHover) {
        return "#aaa9f8";
      } else if (this.notif > 0) {
        return "#ff7391";
      } else return "#FFFFFF";
    },

    notifIcon() {
      if (this.notif > 0) {
        return "https://img.icons8.com/material/30/ff7373/bell.png";
      } else return "https://img.icons8.com/material/30/FFFFFF/bell.png";
    },
  },

  methods: {
    toMain() {
      this.$router.push("/");
    },

    toNotif() {
      this.$router.push("/profile/notif");
    },

    toAddDoc() {
      this.$router.push({ name: "AddDoc" });
    },

    toProfile() {
      this.$router.push("/profile/notif");
    },
  },
};
</script>

<style scoped>
@import url("https://fonts.googleapis.com/css?family=El+Messiri:700&display=swap");

/* Фон */
.background {
  background-color: #347090;
  color: #aaa9f8;
  height: 60px;
  font-family: "El Messiri", sans-serif;
  font-weight: 700;
}
/* Основной стиль */
#header {
  width: auto;
  height: 60px;
  /* max-width: 1400px; */
  min-width: 100px;
  margin: auto;
  margin-top: 0;
  display: grid;
  grid-template-columns: max-content auto max-content;
  color: white;
}
/* Логотип */
.logo {
  margin: 14px;
  fill: white;
  color: white;
  margin-left: 30px;
  font-size: 24px;
  text-align: center;
  display: grid;
  grid-template-columns: max-content max-content;
}
.logo:hover {
  fill: #aaa9f8;
  color: #aaa9f8;
}
.logo > * {
  margin: 0;
  margin-right: 10px;
}
.logo:hover {
  cursor: pointer;
}
/* Добавить документ, уведомления, профиль */
.header-right {
  display: inline-grid;
  grid-template-columns: repeat(3, max-content);
}
.header-right > .tasks,
.header-right > .messages {
  margin: 0px;
  margin-right: 10px;
  margin-left: 10px;
  padding: 0;
}
.header-right p {
  padding: 5px;
}
/* Профиль */
.profile {
  margin: 10.5px;
  margin-left: 8px;
  margin-right: 20px;
  width: 38px;
  height: 38px;
  border: 0;
  background-color: white;
  border-radius: 50%;
}
.profile:hover {
  cursor: pointer;
  box-shadow: 0px 0px 10px 0px #aaa9f8;
}
/* Уведомления */
.messages {
  display: inline-grid;
  grid-template-columns: repeat(2, max-content);
}
/*  */
.registr {
  border: 0;
  padding: 7px;
  margin: 7px;
  background-color: #7cb0c1;
  color: white;
}
.registr:hover {
  cursor: pointer;
  background-color: #aaa9f8;
  transition: background-color 0.3s ease-out;
}
/**/
.icon {
  font-size: 24px;
  font-weight: 700;
  margin: 12.5px;
  display: grid;
  grid-template-columns: max-content max-content;
}
.icon:hover {
  cursor: pointer;
  color: #aaa9f8;
}
.icon:hover svg {
  fill: #aaa9f8;
}
.icon div {
  padding: 0px;
  margin: 0;
  margin-left: 2px;
}
@media (max-width: 500px) {
  * {
    font-size: 24px;
  }
  .profile {
    width: 30px;
    height: 30px;
  }
  .logoP {
    display: none;
  }
}
</style>
